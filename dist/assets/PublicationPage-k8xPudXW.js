import{S}from"./SideBar-COT6sxyv.js";import{r as D,a as F,u as I}from"./index-C3a4g50J.js";import{c as m,a as d,b as t,r as M,d as V,w as n,k as g,l as u,f as B,e as o,v,n as C,A,t as k,F as L,j as U,h as f,B as q,o as z,i as r}from"./index-mpPEvR65.js";import{a as w}from"./index-D8rVyQy1.js";import{d as N}from"./vuedraggable.umd-DRImxRg-.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";const O={components:{SideBar:S,draggable:N},setup(){const b=localStorage.getItem("token"),e=U.useToast(),y=f({details:"",link:"",year:""}),s=f({details:"",link:"",year:""}),p=f(null),h=f([]),_=f(""),i=f({id:null}),x=q(()=>({details:{required:D},link:{required:D,url:F},year:{required:D}})),a=I(x,y),c=async()=>{try{const l=await w.get("http://127.0.0.1:8000/api/publications",{headers:{Authorization:`Bearer ${b}`}});h.value=Array.isArray(l.data.data)?l.data.data:[l.data.data]}catch{e.error("Error loading publications.")}};return z(()=>{document.getElementById("my-resume").classList.add("nav-active"),c()}),{form:y,v$:a,submitForm:async()=>{if(await a.value.$validate())try{(await w.post("http://127.0.0.1:8000/api/publications",y.value,{headers:{Authorization:`Bearer ${b}`}})).status===201&&(e.success("Publication added!"),c(),y.value={details:"",link:"",year:""},a.value.$reset())}catch{e.error("Error adding publication.")}},publications:h,editForm:s,editingId:p,editPublication:l=>{s.value={details:l.details,link:l.link,year:l.year},p.value=l.id,window.bootstrap.Modal.getOrCreateInstance(document.getElementById("editModal")).show()},updatePublication:async()=>{if(p.value)try{(await w.put(`http://127.0.0.1:8000/api/publications/${p.value}`,s.value,{headers:{Authorization:`Bearer ${b}`}})).status===200&&(e.success("Publication updated!"),c(),window.bootstrap.Modal.getInstance(document.getElementById("editModal")).hide())}catch{e.error("Update failed.")}},confirmDelete:l=>{i.value={id:l.id},window.bootstrap.Modal.getOrCreateInstance(document.getElementById("deleteModal")).show()},performDelete:async()=>{try{await w.delete(`http://127.0.0.1:8000/api/publications/${i.value.id}`,{headers:{Authorization:`Bearer ${b}`}}),e.success("Publication deleted!"),c()}catch{e.error("Delete failed.")}finally{window.bootstrap.Modal.getInstance(document.getElementById("deleteModal")).hide()}},deleteTarget:i,onSortEnd:async()=>{try{const l=h.value.map((E,P)=>({...E,sort_order:P+1}));await w.post("http://127.0.0.1:8000/api/update/publication/order",{publications:l},{headers:{Authorization:`Bearer ${b}`}}),e.success("Order updated!")}catch{e.error("Sort order update failed.")}},showDetails:l=>{_.value=l.details,window.bootstrap.Modal.getOrCreateInstance(document.getElementById("viewDetailsModal")).show()},selectedDetails:_}}},Y={id:"main",class:"main"},H={class:"dashboard"},$={class:"row"},j={class:"col-md-12"},R={class:"nav nav-tabs nav-tabs-bordered d-flex"},G={class:"nav-item tab-style"},J={class:"nav-item tab-style"},K={class:"nav-item tab-style"},Q={class:"nav-item tab-style"},W={class:"nav-item tab-style"},X={class:"nav-item"},Z={class:"nav-item tab-style"},tt={class:"nav-item tab-style"},et={class:"nav-item tab-style"},st={class:"tab-content"},at={class:"col-md-12"},lt={key:0,class:"error-msg"},ot={class:"col-md-6"},it={key:0,class:"error-msg"},dt={class:"col-md-6"},nt={key:0,class:"error-msg"},rt={class:"table-responsive mt-4"},ct={class:"table table-bordered table-sm"},mt={key:0},bt={key:1},ut=["onClick"],vt=["href"],ft=["onClick"],yt=["onClick"],pt={key:1},gt={class:"modal fade",id:"viewDetailsModal",tabindex:"-1","aria-labelledby":"viewDetailsModalLabel","aria-hidden":"true"},kt={class:"modal-dialog modal-md"},wt={class:"modal-content"},ht={class:"modal-body"},_t={class:"modal fade",id:"editModal",tabindex:"-1","aria-labelledby":"editModalLabel","aria-hidden":"true"},xt={class:"modal-dialog"},Dt={class:"modal-content"},Mt={class:"modal-body row g-3"},Bt={class:"col-md-12"},Ct={class:"col-md-12"},Et={class:"col-md-12"},Vt={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"confirmDeleteLabel","aria-hidden":"true"},Pt={class:"modal-dialog",style:{"max-width":"400px"}},St={class:"modal-content"},Ft={class:"modal-body"},It={class:"row mt-3"},At={class:"col-md-12 text-center"};function Lt(b,e,y,s,p,h){const _=M("SideBar"),i=M("router-link"),x=M("draggable");return r(),m(L,null,[d(_),t("main",Y,[e[36]||(e[36]=V('<div class="pagetitle"><ol class="breadcrumb"><li class="breadcrumb-item active">Home</li><li class="breadcrumb-item"><a href="">My Resume</a></li></ol></div>',1)),t("section",H,[t("div",$,[t("div",j,[t("ul",R,[t("li",G,[d(i,{to:"/resume/profile",class:"nav-link font-weight-bold"},{default:n(()=>e[10]||(e[10]=[o("Personal")])),_:1})]),t("li",J,[d(i,{to:"/resume/experiences",class:"nav-link font-weight-bold"},{default:n(()=>e[11]||(e[11]=[o("Experience")])),_:1})]),t("li",K,[d(i,{to:"/resume/educations",class:"nav-link font-weight-bold"},{default:n(()=>e[12]||(e[12]=[o("Education")])),_:1})]),t("li",Q,[d(i,{to:"/resume/skills",class:"nav-link font-weight-bold"},{default:n(()=>e[13]||(e[13]=[o("Skills")])),_:1})]),t("li",W,[d(i,{to:"/resume/interests",class:"nav-link font-weight-bold"},{default:n(()=>e[14]||(e[14]=[o("Interest")])),_:1})]),t("li",X,[d(i,{to:"/resume/publications",class:"nav-link active font-weight-bold"},{default:n(()=>e[15]||(e[15]=[o("Publications")])),_:1})]),t("li",Z,[d(i,{to:"/resume/languages",class:"nav-link font-weight-bold"},{default:n(()=>e[16]||(e[16]=[o("Language")])),_:1})]),t("li",tt,[d(i,{to:"/resume/certifications",class:"nav-link font-weight-bold"},{default:n(()=>e[17]||(e[17]=[o("Certifications")])),_:1})]),t("li",et,[d(i,{to:"/resume/awards",class:"nav-link font-weight-bold"},{default:n(()=>e[18]||(e[18]=[o("Awards & Honors")])),_:1})])]),t("div",st,[t("form",{onSubmit:e[3]||(e[3]=g((...a)=>s.submitForm&&s.submitForm(...a),["prevent"])),class:"row g-3"},[t("div",at,[e[19]||(e[19]=t("label",{class:"form-label"},[o("Details "),t("span",{class:"required-mask"},"*")],-1)),u(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.form.details=a),class:C(["form-control",{"is-invalid":s.v$.details.$dirty&&s.v$.details.$error}]),rows:"3"},null,2),[[v,s.form.details]]),s.v$.details.$dirty&&s.v$.details.$error?(r(),m("span",lt," Details required. ")):B("",!0)]),t("div",ot,[e[20]||(e[20]=t("label",{class:"form-label"},[o("Link "),t("span",{class:"required-mask"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>s.form.link=a),type:"text",class:C(["form-control",{"is-invalid":s.v$.link.$dirty&&s.v$.link.$error}])},null,2),[[v,s.form.link]]),s.v$.link.$dirty&&s.v$.link.$error?(r(),m("div",it," Valid link required. ")):B("",!0)]),t("div",dt,[e[21]||(e[21]=t("label",{class:"form-label"},[o("Year "),t("span",{class:"required-mask"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>s.form.year=a),type:"text",class:C(["form-control",{"is-invalid":s.v$.year.$dirty&&s.v$.year.$error}])},null,2),[[v,s.form.year]]),s.v$.year.$dirty&&s.v$.year.$error?(r(),m("div",nt,"Year required.")):B("",!0)]),e[22]||(e[22]=t("div",{class:"col-md-2"},[t("button",{type:"submit",class:"btn btn-primary"},"Submit")],-1))],32),t("div",rt,[t("table",ct,[e[27]||(e[27]=t("thead",null,[t("tr",null,[t("th",{class:"table-th-width-40"},"Details"),t("th",{class:"table-th-width-35"},"Link"),t("th",{class:"table-th-width-10"},"Year"),t("th",{class:"table-th-width-15"},"Actions")])],-1)),s.publications&&s.publications.length>0?(r(),A(x,{key:0,modelValue:s.publications,"onUpdate:modelValue":e[4]||(e[4]=a=>s.publications=a),tag:"tbody","item-key":"id",onEnd:s.onSortEnd},{item:n(({element:a})=>[t("tr",null,[t("td",null,[a.details.length<=15?(r(),m("span",mt,k(a.details),1)):(r(),m("span",bt,[o(k(a.details.slice(0,35))+"... ",1),t("a",{href:"#",onClick:g(c=>s.showDetails(a),["prevent"])},e[23]||(e[23]=[t("span",{class:"text-primary"},"View",-1)]),8,ut)]))]),t("td",null,[t("a",{href:a.link,target:"_blank"},k(a.link.slice(0,35))+"...",9,vt)]),t("td",null,k(a.year),1),t("td",null,[t("a",{href:"#",onClick:g(c=>s.editPublication(a),["prevent"]),class:"text-primary"},e[24]||(e[24]=[t("i",{class:"bi bi-pencil"},null,-1),o(" Edit ")]),8,ft),t("a",{href:"#",onClick:g(c=>s.confirmDelete(a),["prevent"]),class:"text-danger"},e[25]||(e[25]=[t("i",{class:"bi bi-trash"},null,-1),o(" Delete ")]),8,yt)])])]),_:1},8,["modelValue","onEnd"])):(r(),m("tbody",pt,e[26]||(e[26]=[t("tr",null,[t("td",{colspan:"4",class:"maroon"},"No records")],-1)])))]),t("div",gt,[t("div",kt,[t("div",wt,[e[28]||(e[28]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"viewDetailsModalLabel"},"Publication Details"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",ht,k(s.selectedDetails),1)])])])]),t("div",_t,[t("div",xt,[t("div",Dt,[t("form",{onSubmit:e[8]||(e[8]=g((...a)=>s.updatePublication&&s.updatePublication(...a),["prevent"]))},[e[32]||(e[32]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"editModalLabel"},"Edit Publication"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",Mt,[t("div",Bt,[e[29]||(e[29]=t("label",{class:"form-label"},"Details",-1)),u(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=a=>s.editForm.details=a),class:"form-control",rows:"3"},null,512),[[v,s.editForm.details]])]),t("div",Ct,[e[30]||(e[30]=t("label",{class:"form-label"},"Link",-1)),u(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>s.editForm.link=a),type:"url",class:"form-control"},null,512),[[v,s.editForm.link]])]),t("div",Et,[e[31]||(e[31]=t("label",{class:"form-label"},"Year",-1)),u(t("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>s.editForm.year=a),type:"number",class:"form-control"},null,512),[[v,s.editForm.year]])])]),e[33]||(e[33]=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel "),t("button",{type:"submit",class:"btn btn-primary"},"Update")],-1))],32)])])]),t("div",Vt,[t("div",Pt,[t("div",St,[t("div",Ft,[t("div",It,[e[34]||(e[34]=V('<div class="col-md-12 text-center circle"><i class="bi bi-exclamation-triangle-fill text-danger" style="border-radius:50%;padding:4px;background-color:#facdcd;"></i></div><div class="col-md-12 text-center mt-3"><h5 class="font-weight-bold">Are you sure?</h5></div><div class="col-md-12 text-center text-muted"><p> This action cannot be undone. All values associated this field will be lost </p></div>',3)),t("div",At,[t("button",{type:"button",class:"btn btn-danger w-100",onClick:e[9]||(e[9]=(...a)=>s.performDelete&&s.performDelete(...a))}," Delete Field ")]),e[35]||(e[35]=t("div",{class:"col-md-12 text-center mt-2"},[t("button",{type:"button",class:"btn btn-secondary w-100","data-bs-dismiss":"modal"}," Cancel ")],-1))])])])])])])])])])])],64)}const Kt=T(O,[["render",Lt]]);export{Kt as default};
