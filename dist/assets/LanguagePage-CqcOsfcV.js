import{S as D}from"./SideBar-COT6sxyv.js";import{r as E,u as A}from"./index-C3a4g50J.js";import{c as w,a as d,b as t,r as L,d as S,w as i,k as _,l as h,f as M,e as l,v as k,n as C,A as F,F as I,j as N,h as g,B as z,o as U,i as f,t as V}from"./index-mpPEvR65.js";import{a as p}from"./index-D8rVyQy1.js";import{d as q}from"./vuedraggable.umd-DRImxRg-.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={components:{SideBar:D,draggable:q},setup(){const r=localStorage.getItem("token"),e=N.useToast(),m=g({name:"",level:""}),a=g({name:"",level:""}),c=g(null),y=g([]),u=g({id:null,name:""}),n=z(()=>({name:{required:E},level:{required:E}})),v=A(n,m),s=async()=>{try{const o=await p.get("http://127.0.0.1:8000/api/languages",{headers:{Authorization:`Bearer ${r}`}});y.value=Array.isArray(o.data.data)?o.data.data:[o.data.data]}catch{e.error("Error loading languages.")}};return U(()=>{document.getElementById("my-resume").classList.add("nav-active"),s()}),{form:m,v$:v,submitForm:async()=>{if(await v.value.$validate())try{(await p.post("http://127.0.0.1:8000/api/languages",m.value,{headers:{Authorization:`Bearer ${r}`}})).status===201&&(e.success("Language added!"),s(),m.value={name:"",level:""},v.value.$reset())}catch{e.error("Error adding language.")}},languages:y,editForm:a,editingId:c,editLanguage:o=>{a.value={name:o.name,level:o.level},c.value=o.id,window.bootstrap.Modal.getOrCreateInstance(document.getElementById("editModal")).show()},updateLanguage:async()=>{if(c.value)try{(await p.put(`http://127.0.0.1:8000/api/languages/${c.value}`,a.value,{headers:{Authorization:`Bearer ${r}`}})).status===200&&(e.success("Language updated!"),s(),window.bootstrap.Modal.getInstance(document.getElementById("editModal")).hide())}catch(o){if(o.response&&o.response.status===422){const b=o.response.data.errors;for(const x in b)e.error(b[x][0])}else e.error("Server error occurred."),console.error(o)}},confirmDelete:o=>{u.value={id:o.id,name:o.name},window.bootstrap.Modal.getOrCreateInstance(document.getElementById("deleteModal")).show()},performDelete:async()=>{try{await p.delete(`http://127.0.0.1:8000/api/languages/${u.value.id}`,{headers:{Authorization:`Bearer ${r}`}}),e.success("Language deleted!"),s()}catch{e.error("Delete failed.")}finally{window.bootstrap.Modal.getInstance(document.getElementById("deleteModal")).hide()}},deleteTarget:u,onSortEnd:async()=>{try{const o=y.value.map((b,x)=>({...b,sort_order:x+1}));await p.post("http://127.0.0.1:8000/api/update/language/order",{languagess:o},{headers:{Authorization:`Bearer ${r}`}}),e.success("Sort order updated!")}catch{e.error("Sort order update failed.")}}}}},O={id:"main",class:"main"},$={class:"dashboard"},H={class:"row"},j={class:"col-md-12"},R={class:"nav nav-tabs nav-tabs-bordered d-flex"},G={class:"nav-item tab-style"},J={class:"nav-item tab-style"},K={class:"nav-item tab-style"},Q={class:"nav-item tab-style"},W={class:"nav-item tab-style"},X={class:"nav-item tab-style"},Y={class:"nav-item"},Z={class:"nav-item tab-style"},ee={class:"nav-item tab-style"},te={class:"tab-content"},ae={class:"col-md-6"},se={key:0,class:"error-msg"},oe={class:"col-md-6"},le={key:0,class:"error-msg"},ne={class:"table-responsive mt-4"},de={class:"table table-bordered table-sm"},ie=["onClick"],re=["onClick"],me={key:1},ce={class:"modal fade",id:"editModal",tabindex:"-1","aria-labelledby":"editModalLabel","aria-hidden":"true"},ue={class:"modal-dialog"},ve={class:"modal-content"},be={class:"modal-body row g-3"},ge={class:"col-md-12"},fe={class:"col-md-12"},pe={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"confirmDeleteLabel","aria-hidden":"true"},ye={class:"modal-dialog",style:{"max-width":"400px"}},we={class:"modal-content"},_e={class:"modal-body"},he={class:"row mt-3"},ke={class:"col-md-12 text-center"};function xe(r,e,m,a,c,y){const u=L("SideBar"),n=L("router-link"),v=L("draggable");return f(),w(I,null,[d(u),t("main",O,[e[30]||(e[30]=S('<div class="pagetitle"><ol class="breadcrumb"><li class="breadcrumb-item active">Home</li><li class="breadcrumb-item"><a href="">My Resume</a></li></ol></div>',1)),t("section",$,[t("div",H,[t("div",j,[t("ul",R,[t("li",G,[d(n,{to:"/resume/profile",class:"nav-link font-weight-bold"},{default:i(()=>e[8]||(e[8]=[l("Personal")])),_:1})]),t("li",J,[d(n,{to:"/resume/experiences",class:"nav-link font-weight-bold"},{default:i(()=>e[9]||(e[9]=[l("Experience")])),_:1})]),t("li",K,[d(n,{to:"/resume/educations",class:"nav-link font-weight-bold"},{default:i(()=>e[10]||(e[10]=[l("Education")])),_:1})]),t("li",Q,[d(n,{to:"/resume/skills",class:"nav-link font-weight-bold"},{default:i(()=>e[11]||(e[11]=[l("Skills")])),_:1})]),t("li",W,[d(n,{to:"/resume/interests",class:"nav-link font-weight-bold"},{default:i(()=>e[12]||(e[12]=[l("Interest")])),_:1})]),t("li",X,[d(n,{to:"/resume/publications",class:"nav-link font-weight-bold"},{default:i(()=>e[13]||(e[13]=[l("Publications")])),_:1})]),t("li",Y,[d(n,{to:"/resume/languages",class:"nav-link active font-weight-bold"},{default:i(()=>e[14]||(e[14]=[l("Language")])),_:1})]),t("li",Z,[d(n,{to:"/resume/certifications",class:"nav-link font-weight-bold"},{default:i(()=>e[15]||(e[15]=[l("Certifications")])),_:1})]),t("li",ee,[d(n,{to:"/resume/awards",class:"nav-link font-weight-bold"},{default:i(()=>e[16]||(e[16]=[l("Awards & Honors")])),_:1})])]),t("div",te,[t("form",{onSubmit:e[2]||(e[2]=_((...s)=>a.submitForm&&a.submitForm(...s),["prevent"])),class:"row g-3"},[t("div",ae,[e[17]||(e[17]=t("label",{class:"form-label"},[l("Language Name "),t("span",{class:"required-mask"},"*")],-1)),h(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.form.name=s),type:"text",class:C(["form-control",{"is-invalid":a.v$.level.$dirty&&a.v$.level.$error}])},null,2),[[k,a.form.name]]),a.v$.name.$dirty&&a.v$.name.$error?(f(),w("span",se," Name required. ")):M("",!0)]),t("div",oe,[e[18]||(e[18]=t("label",{class:"form-label"},[l("Proficiency Level (Out of 10) "),t("span",{class:"required-mask"},"*")],-1)),h(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.form.level=s),type:"text",class:C(["form-control",{"is-invalid":a.v$.level.$dirty&&a.v$.level.$error}])},null,2),[[k,a.form.level]]),a.v$.level.$dirty&&a.v$.level.$error?(f(),w("span",le," Proficiency Level required. ")):M("",!0)]),e[19]||(e[19]=t("div",{class:"col-md-2"},[t("button",{type:"submit",class:"btn btn-primary"},"Submit")],-1))],32),t("div",ne,[t("table",de,[e[23]||(e[23]=t("thead",null,[t("tr",null,[t("th",null,"Name"),t("th",null,"Level"),t("th",null,"Actions")])],-1)),a.languages&&a.languages.length>0?(f(),F(v,{key:0,modelValue:a.languages,"onUpdate:modelValue":e[3]||(e[3]=s=>a.languages=s),tag:"tbody","item-key":"id",onEnd:a.onSortEnd},{item:i(({element:s})=>[t("tr",null,[t("td",null,V(s.name),1),t("td",null,V(s.level),1),t("td",null,[t("a",{href:"#",onClick:_(B=>a.editLanguage(s),["prevent"]),class:"text-primary"},e[20]||(e[20]=[t("i",{class:"bi bi-pencil"},null,-1),l(" Edit ")]),8,ie),t("a",{href:"#",onClick:_(B=>a.confirmDelete(s),["prevent"]),class:"text-danger"},e[21]||(e[21]=[t("i",{class:"bi bi-trash"},null,-1),l(" Delete")]),8,re)])])]),_:1},8,["modelValue","onEnd"])):(f(),w("tbody",me,e[22]||(e[22]=[t("tr",null,[t("td",{colspan:"3",class:"maroon"},"No records")],-1)])))])]),t("div",ce,[t("div",ue,[t("div",ve,[t("form",{onSubmit:e[6]||(e[6]=_((...s)=>a.updateLanguage&&a.updateLanguage(...s),["prevent"]))},[e[26]||(e[26]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"editModalLabel"},"Edit Language"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",be,[t("div",ge,[e[24]||(e[24]=t("label",{class:"form-label"},"Language Name",-1)),h(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>a.editForm.name=s),type:"text",class:"form-control"},null,512),[[k,a.editForm.name]])]),t("div",fe,[e[25]||(e[25]=t("label",{class:"form-label"},"Level",-1)),h(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>a.editForm.level=s),type:"text",class:"form-control"},null,512),[[k,a.editForm.level]])])]),e[27]||(e[27]=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel "),t("button",{type:"submit",class:"btn btn-primary"},"Update")],-1))],32)])])]),t("div",pe,[t("div",ye,[t("div",we,[t("div",_e,[t("div",he,[e[28]||(e[28]=S('<div class="col-md-12 text-center circle"><i class="bi bi-exclamation-triangle-fill text-danger" style="border-radius:50%;padding:4px;background-color:#facdcd;"></i></div><div class="col-md-12 text-center mt-3"><h5 class="font-weight-bold">Are you sure?</h5></div><div class="col-md-12 text-center text-muted"><p> This action cannot be undone. All values associated this field will be lost </p></div>',3)),t("div",ke,[t("button",{type:"button",class:"btn btn-danger w-100",onClick:e[7]||(e[7]=(...s)=>a.performDelete&&a.performDelete(...s))}," Delete Field ")]),e[29]||(e[29]=t("div",{class:"col-md-12 text-center mt-2"},[t("button",{type:"button",class:"btn btn-secondary w-100","data-bs-dismiss":"modal"}," Cancel ")],-1))])])])])])])])])])])],64)}const Ne=P(T,[["render",xe]]);export{Ne as default};
