import{S as q}from"./SideBar-CoVQvkwt.js";import{_ as O,r as I,u as P}from"./index-BYVp4fHy.js";import{c as y,a as n,b as e,r as h,d as K,p as d,w as A,e as S,f as D,g as a,v as _,t as M,s as H,y as V,F as R,n as $,i as m,l as j,x as G,o as b}from"./index-CIbV6caW.js";import{a as p}from"./index-D8rVyQy1.js";import{d as J}from"./vuedraggable.umd-A9et21qD.js";const Q={components:{SideBar:q,draggable:J},setup(){const u=localStorage.getItem("token"),t=$.useToast(),v=m({title:"",level:""}),l=m(null),k=m({title:"",level:""}),f=m([]),r=m({id:null,title:""}),i=async()=>{try{const o=await p.get("http://127.0.0.1:8000/api/skills",{headers:{Authorization:`Bearer ${u}`}});o.status===200&&(f.value=Array.isArray(o.data.data)?o.data.data:[o.data.data])}catch{t.error("Error loading skills.")}};j(i);const x=G(()=>({title:{required:I},level:{required:I}})),s=P(x,v),B=async()=>{if(await s.value.$validate())try{(await p.post("http://127.0.0.1:8000/api/skills",v.value,{headers:{Authorization:`Bearer ${u}`}})).status===201&&(t.success("Skill saved!"),i(),L())}catch{t.error("Failed to save skill.")}},L=()=>{v.value={title:"",level:""},s.value.$reset()},T=o=>{r.value={id:o.id,title:o.title},window.bootstrap.Modal.getOrCreateInstance(document.getElementById("confirmDeleteModal")).show()},z=async()=>{if(r.value.id)try{await p.delete(`http://127.0.0.1:8000/api/skills/${r.value.id}`,{headers:{Authorization:`Bearer ${u}`}}),t.success(`Deleted: ${r.value.title}`),i()}catch{t.error("Error deleting skill.")}finally{window.bootstrap.Modal.getInstance(document.getElementById("confirmDeleteModal")).hide()}},N=o=>{k.value={...o},l.value=o.id,window.bootstrap.Modal.getOrCreateInstance(document.getElementById("editSkillModal")).show()},U=async()=>{if(l.value!==null)try{(await p.put(`http://127.0.0.1:8000/api/skills/${l.value}`,k.value,{headers:{Authorization:`Bearer ${u}`}})).status===200&&(t.success("Skill updated!"),i(),window.bootstrap.Modal.getInstance(document.getElementById("editSkillModal")).hide())}catch{t.error("Error updating skill.")}},C=m(""),c=m("asc");return{form:v,v$:s,submitForm:B,skills:f,confirmDelete:T,performDelete:z,editSkill:N,editForm:k,updateSkill:U,sortKey:C,sortOrder:c,sortBy:o=>{C.value===o?c.value=c.value==="asc"?"desc":"asc":(C.value=o,c.value="asc"),f.value.sort((g,E)=>{const w=(g[o]||"").toString().toLowerCase(),F=(E[o]||"").toString().toLowerCase();return w<F?c.value==="asc"?-1:1:w>F?c.value==="asc"?1:-1:0})},onSortEnd:async()=>{try{const o=f.value.map((E,w)=>({...E,sort_order:w+1}));(await p.post("http://127.0.0.1:8000/api/update/skill/order",{skills:o},{headers:{Authorization:`Bearer ${u}`}})).status===200&&t.success("Sort order updated!")}catch{t.error("Sort update failed.")}},deleteTarget:r}}},W={id:"main",class:"main"},X={class:"dashboard"},Y={class:"row"},Z={class:"col-md-12"},tt={class:"nav nav-tabs nav-tabs-bordered d-flex"},et={class:"nav-item tab-style"},lt={class:"nav-item tab-style"},st={class:"nav-item tab-style"},ot={class:"nav-item"},at={class:"nav-item tab-style"},it={class:"nav-item tab-style"},rt={class:"tab-content"},nt={class:"col-md-6"},dt={key:0,class:"error-msg"},mt={class:"col-md-6"},ut={key:0,class:"error-msg"},ct={class:"col-md-12 mt-4"},bt={class:"table table-bordered table-sm"},vt=["onClick"],ft=["onClick"],yt={key:1},pt={class:"modal fade",id:"editSkillModal",tabindex:"-1","aria-labelledby":"editSkillModalLabel","aria-hidden":"true"},kt={class:"modal-dialog"},gt={class:"modal-content"},wt={class:"modal-body row g-3"},St={class:"col-md-12"},_t={class:"col-md-12"},xt={class:"modal fade",id:"confirmDeleteModal",tabindex:"-1","aria-labelledby":"confirmDeleteLabel","aria-hidden":"true"},Bt={class:"modal-dialog"},Ct={class:"modal-content"},Et={class:"modal-body"},ht={class:"modal-footer"};function Dt(u,t,v,l,k,f){const r=h("SideBar"),i=h("router-link"),x=h("draggable");return b(),y(R,null,[n(r),e("main",W,[t[32]||(t[32]=K('<div class="pagetitle"><ol class="breadcrumb"><li class="breadcrumb-item active">Home</li><li class="breadcrumb-item"><a href="">My Resume</a></li></ol></div>',1)),e("section",X,[e("div",Y,[e("div",Z,[e("ul",tt,[e("li",et,[n(i,{to:"/resume/profile",class:"nav-link font-weight-bold"},{default:d(()=>t[9]||(t[9]=[a("Personal")])),_:1})]),e("li",lt,[n(i,{to:"/resume/experiences",class:"nav-link font-weight-bold"},{default:d(()=>t[10]||(t[10]=[a("Experience")])),_:1})]),e("li",st,[n(i,{to:"/resume/educations",class:"nav-link font-weight-bold"},{default:d(()=>t[11]||(t[11]=[a("Education")])),_:1})]),e("li",ot,[n(i,{to:"/resume/skills",class:"nav-link active font-weight-bold"},{default:d(()=>t[12]||(t[12]=[a("Skills")])),_:1})]),e("li",at,[n(i,{to:"/resume/interests",class:"nav-link font-weight-bold"},{default:d(()=>t[13]||(t[13]=[a("Interest")])),_:1})]),e("li",it,[n(i,{to:"/resume/publications",class:"nav-link font-weight-bold"},{default:d(()=>t[14]||(t[14]=[a("Publications")])),_:1})])]),e("div",rt,[e("form",{onSubmit:t[2]||(t[2]=A((...s)=>l.submitForm&&l.submitForm(...s),["prevent"])),class:"row g-3"},[e("div",nt,[t[15]||(t[15]=e("label",{class:"form-label"},[a("Title "),e("span",{class:"required-mask"},"*")],-1)),S(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.form.title=s),type:"text",class:M(["form-control",{"is-invalid":l.v$.title.$dirty&&l.v$.title.$error}])},null,2),[[_,l.form.title]]),l.v$.title.$dirty&&l.v$.title.$error?(b(),y("div",dt," Title required. ")):D("",!0)]),e("div",mt,[t[16]||(t[16]=e("label",{class:"form-label"},[a("Level (Out of 10)"),e("span",{class:"required-mask"},"*")],-1)),S(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.form.level=s),type:"number",max:"10",min:"1",class:M(["form-control",{"is-invalid":l.v$.level.$dirty&&l.v$.level.$error}])},null,2),[[_,l.form.level]]),l.v$.level.$dirty&&l.v$.level.$error?(b(),y("span",ut," Level required. ")):D("",!0)]),t[17]||(t[17]=e("div",{class:"col-md-12"},[e("button",{type:"submit",class:"btn btn-primary"},"Submit")],-1))],32),e("div",ct,[e("table",bt,[e("thead",null,[e("tr",null,[e("th",{onClick:t[3]||(t[3]=s=>l.sortBy("title")),style:{cursor:"pointer"}},[t[18]||(t[18]=a(" Title ")),l.sortKey==="title"?(b(),y("i",{key:0,class:M(l.sortOrder==="asc"?"bi bi-arrow-up":"bi bi-arrow-down")},null,2)):D("",!0)]),t[19]||(t[19]=e("th",null,"Level",-1)),t[20]||(t[20]=e("th",null,"Actions",-1))])]),l.skills&&l.skills.length>0?(b(),H(x,{key:0,modelValue:l.skills,"onUpdate:modelValue":t[4]||(t[4]=s=>l.skills=s),tag:"tbody","item-key":"id",onEnd:l.onSortEnd},{item:d(({element:s})=>[e("tr",null,[e("td",null,V(s.title),1),e("td",null,V(s.level),1),e("td",null,[e("a",{href:"#",onClick:B=>l.editSkill(s),class:"text-primary"},t[21]||(t[21]=[e("i",{class:"bi bi-pencil"},null,-1),a(" Edit ")]),8,vt),e("a",{href:"#",onClick:B=>l.confirmDelete(s),class:"text-danger"},t[22]||(t[22]=[e("i",{class:"bi bi-trash"},null,-1),a(" Delete ")]),8,ft)])])]),_:1},8,["modelValue","onEnd"])):(b(),y("tbody",yt,t[23]||(t[23]=[e("tr",null,[e("td",{colspan:"3",class:"maroon"},"No records")],-1)])))])]),e("div",pt,[e("div",kt,[e("div",gt,[e("form",{onSubmit:t[7]||(t[7]=A((...s)=>l.updateSkill&&l.updateSkill(...s),["prevent"]))},[t[26]||(t[26]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"editSkillModalLabel"},"Edit Skill"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",wt,[e("div",St,[t[24]||(t[24]=e("label",{class:"form-label"},"Skill Title",-1)),S(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.editForm.title=s),type:"text",class:"form-control"},null,512),[[_,l.editForm.title]])]),e("div",_t,[t[25]||(t[25]=e("label",{class:"form-label"},"Skill Level",-1)),S(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.editForm.level=s),type:"text",class:"form-control"},null,512),[[_,l.editForm.level]])])]),t[27]||(t[27]=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel "),e("button",{type:"submit",class:"btn btn-primary"},"Update")],-1))],32)])])]),e("div",xt,[e("div",Bt,[e("div",Ct,[t[31]||(t[31]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"confirmDeleteLabel"},"Confirm Delete"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",Et,[t[28]||(t[28]=a(' Are you sure you want to delete "')),e("strong",null,V(l.deleteTarget.title),1),t[29]||(t[29]=a('"? '))]),e("div",ht,[t[30]||(t[30]=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel ",-1)),e("button",{type:"button",class:"btn btn-danger",onClick:t[8]||(t[8]=(...s)=>l.performDelete&&l.performDelete(...s))}," Delete ")])])])])])])])])])],64)}const zt=O(Q,[["render",Dt]]);export{zt as default};
