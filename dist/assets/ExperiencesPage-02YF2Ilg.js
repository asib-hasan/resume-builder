import{S as N}from"./SideBar-COT6sxyv.js";import{r as F,u as O}from"./index-C3a4g50J.js";import{c as d,a as b,b as t,r as W,d as j,w as p,k as I,l as m,f as v,e as a,v as c,n as f,z as U,A as K,F as P,j as R,h as u,o as J,B as H,i,t as S}from"./index-mpPEvR65.js";import{a as h}from"./index-D8rVyQy1.js";import{d as Q}from"./vuedraggable.umd-DRImxRg-.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={components:{SideBar:N,draggable:Q},setup(){const x=localStorage.getItem("token"),e=R.useToast(),_=u({job_title:"",company_name:"",start_date:"",end_date:"",responsibilities:""}),o=u(!1),A=u(""),D=u(!1),k=u(null),n=u({job_title:"",company_name:"",start_date:"",end_date:"",responsibilities:""}),w=u(!1),g=u([]),B=u({id:null}),E=u(""),s=u("asc"),C=async()=>{try{const l=await h.get("http://127.0.0.1:8000/api/experiences",{headers:{Authorization:`Bearer ${x}`}});if(l.status===200){var r=l.data;g.value=Array.isArray(r.data)?r.data:[r.data],console.log("Experiences:",g.value)}else console.error("Failed to load experiences.")}catch(l){console.error("Error loading experiences:",l)}};J(()=>{document.getElementById("my-resume").classList.add("nav-active"),C()});const q=H(()=>({job_title:{required:F},company_name:{required:F},start_date:{required:F},end_date:o.value?{}:{required:F},responsibilities:{required:F}})),M=O(q,_),T=async()=>{if(!await M.value.$validate()){e.error("Please fill out the form correctly.");return}try{const l={..._.value,end_date:o.value?null:_.value.end_date,currentlyWorking:o.value};(await h.post("http://127.0.0.1:8000/api/experiences",l,{headers:{Authorization:`Bearer ${x}`}})).status===201?(e.success("Experience saved!"),C(),z()):e.error("Failed to save experience.")}catch(l){if(l.response&&l.response.status===422){const y=l.response.data.errors;for(const V in y)e.error(y[V][0])}else e.error("Server error occurred."),console.error(l)}},z=()=>{_.value={job_title:"",company_name:"",start_date:"",end_date:"",responsibilities:""},o.value=!1,k.value=null,M.value.$reset()};return{form:_,v$:M,submitForm:T,askAI:async()=>{if(!A.value.trim())return alert("Enter a question");D.value=!0;try{const r=await h.post("https://api.openai.com/v1/chat/completions",{model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a helpful assistant that writes professional resume responsibilities."},{role:"user",content:A.value}]},{headers:{"Content-Type":"application/json",Authorization:"Bearer undefined"}});_.value.responsibilities=r.data.choices[0].message.content,A.value="",e.success("AI generated responsibility!")}catch{e.error("Failed to get AI response.")}finally{D.value=!1}},isLoading:D,currentlyWorking:o,aiQuestion:A,experiences:g,editExperience:r=>{n.value={...r},w.value=r.currentlyWorking,k.value=r.id,window.bootstrap.Modal.getOrCreateInstance(document.getElementById("editExperienceModal")).show()},editingIndex:k,editForm:n,editCurrentlyWorking:w,updateExperience:async()=>{if(k.value!==null)try{const r={...n.value,end_date:w.value?null:n.value.end_date,currentlyWorking:w.value};(await h.put(`http://127.0.0.1:8000/api/experiences/${k.value}`,r,{headers:{Authorization:`Bearer ${x}`}})).status===200?(e.success("Experience updated successfully!"),C(),window.bootstrap.Modal.getInstance(document.getElementById("editExperienceModal")).hide()):e.error("Failed to update experience.")}catch(r){if(r.response&&r.response.status===422){const l=r.response.data.errors;for(const y in l)e.error(l[y][0])}else r.response&&r.response.status===404?e.error("Experience not found."):(e.error("Server error occurred."),console.error(r))}},sortKey:E,sortOrder:s,sortBy:r=>{E.value===r?s.value=s.value==="asc"?"desc":"asc":(E.value=r,s.value="asc"),g.value.sort((l,y)=>{let V=(l[r]||"").toString().toLowerCase(),L=(y[r]||"").toString().toLowerCase();return V<L?s.value==="asc"?-1:1:V>L?s.value==="asc"?1:-1:0})},onSortEnd:async()=>{try{const r=g.value.map((l,y)=>({...l,sort_order:y+1}));try{(await h.post("http://127.0.0.1:8000/api/update/experience/order",{experiences:r},{headers:{Authorization:`Bearer ${x}`}})).status==200?e.success("Sort order updated successfully!"):e.error("Failed to update sort order.")}catch(l){console.error("Error updating sort order:",l)}e.success("Sort order updated successfully!")}catch(r){e.error("Failed to update sort order."),console.error(r)}},confirmDelete:r=>{B.value={id:r.id,details:r.details},window.bootstrap.Modal.getOrCreateInstance(document.getElementById("deleteModal")).show()},performDelete:async()=>{try{await h.delete(`http://127.0.0.1:8000/api/experiences/${B.value.id}`,{headers:{Authorization:`Bearer ${x}`}}),e.success("Publication deleted!"),C()}catch{e.error("Delete failed.")}finally{window.bootstrap.Modal.getInstance(document.getElementById("deleteModal")).hide()}}}}},X={id:"main",class:"main"},Z={class:"dashboard"},$={class:"row"},ee={class:"col-md-12"},te={class:"nav nav-tabs nav-tabs-bordered d-flex"},oe={class:"nav-item tab-style"},se={class:"nav-item"},re={class:"nav-item tab-style"},le={class:"nav-item tab-style"},ae={class:"nav-item tab-style"},ie={class:"nav-item tab-style"},ne={class:"nav-item tab-style"},de={class:"nav-item tab-style"},me={class:"nav-item tab-style"},ce={class:"tab-content"},ue={class:"col-md-4"},be={key:0,class:"error-msg"},pe={class:"col-md-4"},ve={key:0,class:"error-msg"},ye={class:"col-md-4"},fe={key:0,class:"error-msg"},ge={class:"col-md-4"},_e=["disabled"],ke={class:"form-check mt-2"},xe={key:0,class:"error-msg"},we={class:"col-md-12"},Ee={key:0,class:"error-msg"},Ce={class:"modal fade",id:"aiModal",tabindex:"-1","aria-labelledby":"aiModalLabel","aria-hidden":"true"},he={class:"modal-dialog modal-lg"},Ae={class:"modal-content"},Be={class:"modal-body"},Fe={class:"modal-footer"},Se=["disabled"],De=["disabled"],Ve={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Ie={key:1},Me={key:2,class:"ms-2"},We={class:"col-md-12 mt-4"},Le={class:"table table-bordered table-sm"},je={style:{"white-space":"initial"}},Ue=["onClick"],qe=["onClick"],Te={key:1},ze={class:"modal fade",id:"editExperienceModal",tabindex:"-1","aria-labelledby":"editExperienceModalLabel","aria-hidden":"true"},Ne={class:"modal-dialog modal-lg"},Oe={class:"modal-content"},Ke={class:"modal-body row g-3"},Pe={class:"col-md-4"},Re={class:"col-md-4"},Je={class:"col-md-4"},He={class:"col-md-4"},Qe=["disabled"],Ye={class:"form-check mt-2"},Ge={class:"col-md-12"},Xe={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"confirmDeleteLabel","aria-hidden":"true"},Ze={class:"modal-dialog",style:{"max-width":"400px"}},$e={class:"modal-content"},et={class:"modal-body"},tt={class:"row mt-3"},ot={class:"col-md-12 text-center"};function st(x,e,_,o,A,D){var g,B,E;const k=W("SideBar"),n=W("router-link"),w=W("draggable");return i(),d(P,null,[b(k),t("main",X,[e[61]||(e[61]=j('<div class="pagetitle"><ol class="breadcrumb"><li class="breadcrumb-item active">Home</li><li class="breadcrumb-item"><a href="">My Resume</a></li></ol></div>',1)),t("section",Z,[t("div",$,[t("div",ee,[t("ul",te,[t("li",oe,[b(n,{to:"/resume/profile",class:"nav-link font-weight-bold"},{default:p(()=>e[24]||(e[24]=[a("Personal")])),_:1})]),t("li",se,[b(n,{to:"/resume/experiences",class:"nav-link active font-weight-bold"},{default:p(()=>e[25]||(e[25]=[a("Experience")])),_:1})]),t("li",re,[b(n,{to:"/resume/educations",class:"nav-link font-weight-bold"},{default:p(()=>e[26]||(e[26]=[a("Education")])),_:1})]),t("li",le,[b(n,{to:"/resume/skills",class:"nav-link font-weight-bold"},{default:p(()=>e[27]||(e[27]=[a("Skills")])),_:1})]),t("li",ae,[b(n,{to:"/resume/interests",class:"nav-link font-weight-bold"},{default:p(()=>e[28]||(e[28]=[a("Interest")])),_:1})]),t("li",ie,[b(n,{to:"/resume/publications",class:"nav-link font-weight-bold"},{default:p(()=>e[29]||(e[29]=[a("Publications")])),_:1})]),t("li",ne,[b(n,{to:"/resume/languages",class:"nav-link font-weight-bold"},{default:p(()=>e[30]||(e[30]=[a("Language")])),_:1})]),t("li",de,[b(n,{to:"/resume/certifications",class:"nav-link font-weight-bold"},{default:p(()=>e[31]||(e[31]=[a("Certifications")])),_:1})]),t("li",me,[b(n,{to:"/resume/awards",class:"nav-link font-weight-bold"},{default:p(()=>e[32]||(e[32]=[a("Awards & Honors")])),_:1})])]),t("div",ce,[t("form",{onSubmit:e[7]||(e[7]=I((...s)=>o.submitForm&&o.submitForm(...s),["prevent"])),class:"row g-3"},[t("div",ue,[e[33]||(e[33]=t("label",{class:"form-label"},[a("Job Title "),t("span",{class:"required-mask"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.form.job_title=s),type:"text",class:f(["form-control",{"is-invalid":o.v$.job_title.$dirty&&o.v$.job_title.$error}])},null,2),[[c,o.form.job_title]]),o.v$.job_title.$error?(i(),d("div",be,"Job title required")):v("",!0)]),t("div",pe,[e[34]||(e[34]=t("label",{class:"form-label"},[a("Company Name "),t("span",{class:"required-mask"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.form.company_name=s),type:"text",class:f(["form-control",{"is-invalid":o.v$.company_name.$dirty&&o.v$.company_name.$error}])},null,2),[[c,o.form.company_name]]),o.v$.company_name.$error?(i(),d("div",ve,"Company name required")):v("",!0)]),t("div",ye,[e[35]||(e[35]=t("label",{class:"form-label"},[a("Start Date "),t("span",{class:"required-mask"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.form.start_date=s),type:"date",class:f(["form-control",{"is-invalid":o.v$.start_date.$dirty&&o.v$.start_date.$error}])},null,2),[[c,o.form.start_date]]),o.v$.start_date.$error?(i(),d("div",fe,"Start date required")):v("",!0)]),t("div",ge,[e[37]||(e[37]=t("label",{class:"form-label"},[a("End Date "),t("span",{class:"required-mask"},"*")],-1)),m(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.form.end_date=s),type:"date",class:f(["form-control",{"is-invalid":((g=o.v$.end_date)==null?void 0:g.$dirty)&&((B=o.v$.end_date)==null?void 0:B.$error)}]),disabled:o.currentlyWorking},null,10,_e),[[c,o.form.end_date]]),t("div",ke,[m(t("input",{class:"form-check-input",type:"checkbox",id:"currentlyWorking","onUpdate:modelValue":e[4]||(e[4]=s=>o.currentlyWorking=s),onChange:e[5]||(e[5]=s=>o.form.end_date=o.currentlyWorking?"":o.form.end_date)},null,544),[[U,o.currentlyWorking]]),e[36]||(e[36]=t("label",{class:"form-check-label",for:"currentlyWorking"},[t("small",null,"Currently Working")],-1))]),(E=o.v$.end_date)!=null&&E.$error?(i(),d("div",xe,"End date required")):v("",!0)]),t("div",we,[e[38]||(e[38]=t("label",{class:"form-label"},[a("Responsibilities "),t("span",{class:"required-mask"},"*"),t("a",{href:"#",class:"text-danger ai-button","data-bs-toggle":"modal","data-bs-target":"#aiModal"},[t("i",{class:"bi bi-cpu"}),a(" Ask AI ")])],-1)),m(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.form.responsibilities=s),class:f(["form-control",{"is-invalid":o.v$.responsibilities.$dirty&&o.v$.responsibilities.$error}]),rows:"5",placeholder:"Describe your responsibilities..."},null,2),[[c,o.form.responsibilities]]),o.v$.responsibilities.$error?(i(),d("div",Ee," Responsibilities required ")):v("",!0)]),e[39]||(e[39]=t("div",{class:"col-md-4"},[t("button",{type:"submit",class:"btn btn-primary"},"Submit")],-1))],32),t("div",Ce,[t("div",he,[t("div",Ae,[e[41]||(e[41]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"aiModalLabel"},"AI Assistance"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",Be,[e[40]||(e[40]=t("p",null,"How can I help you? Ask me anything related to your responsibilities.",-1)),m(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.aiQuestion=s),class:"form-control",rows:"4",placeholder:"Type your question..."},null,512),[[c,o.aiQuestion]])]),t("div",Fe,[t("button",{class:"btn btn-secondary","data-bs-dismiss":"modal",disabled:o.isLoading}," Close ",8,Se),t("button",{class:"btn btn-primary",onClick:e[9]||(e[9]=(...s)=>o.askAI&&o.askAI(...s)),disabled:o.isLoading},[o.isLoading?(i(),d("span",Ve)):v("",!0),o.isLoading?(i(),d("span",Me,"Waiting...")):(i(),d("span",Ie,"Ask"))],8,De)])])])]),t("div",We,[t("table",Le,[t("thead",null,[t("tr",null,[t("th",{class:"table-td-width-25",onClick:e[10]||(e[10]=s=>o.sortBy("job_title")),style:{cursor:"pointer"}},[e[42]||(e[42]=a(" Job Title ")),o.sortKey==="job_title"?(i(),d("i",{key:0,class:f(o.sortOrder==="asc"?"bi bi-arrow-up":"bi bi-arrow-down")},null,2)):v("",!0)]),t("th",{class:"table-td-width-15",onClick:e[11]||(e[11]=s=>o.sortBy("company_name")),style:{cursor:"pointer"}},[e[43]||(e[43]=a(" Company Name ")),o.sortKey==="company_name"?(i(),d("i",{key:0,class:f(o.sortOrder==="asc"?"bi bi-arrow-up":"bi bi-arrow-down")},null,2)):v("",!0)]),t("th",{class:"table-td-width-10",onClick:e[12]||(e[12]=s=>o.sortBy("start_date")),style:{cursor:"pointer"}},[e[44]||(e[44]=a(" Start Date ")),o.sortKey==="start_date"?(i(),d("i",{key:0,class:f(o.sortOrder==="asc"?"bi bi-arrow-up":"bi bi-arrow-down")},null,2)):v("",!0)]),t("th",{class:"table-td-width-10",onClick:e[13]||(e[13]=s=>o.sortBy("end_date")),style:{cursor:"pointer"}},[e[45]||(e[45]=a(" End Date ")),o.sortKey==="end_date"?(i(),d("i",{key:0,class:f(o.sortOrder==="asc"?"bi bi-arrow-up":"bi bi-arrow-down")},null,2)):v("",!0)]),e[46]||(e[46]=t("th",{class:"table-td-width-40"},"Responsibilities",-1)),e[47]||(e[47]=t("th",{class:"table-td-width-10"},"Actions",-1))])]),o.experiences&&o.experiences.length>0?(i(),K(w,{key:0,modelValue:o.experiences,"onUpdate:modelValue":e[14]||(e[14]=s=>o.experiences=s),tag:"tbody","item-key":"id",onEnd:o.onSortEnd},{item:p(({element:s})=>[t("tr",null,[t("td",null,S(s.job_title),1),t("td",null,S(s.company_name),1),t("td",null,S(new Date(s.start_date).toLocaleDateString()),1),t("td",null,S(s.end_date==null?"Currently Working":new Date(s.end_date).toLocaleDateString()),1),t("td",je,S(s.responsibilities),1),t("td",null,[t("a",{href:"#",onClick:I(C=>o.editExperience(s),["prevent"]),class:"text-primary"},e[48]||(e[48]=[t("i",{class:"bi bi-pencil"},null,-1),a(" Edit ")]),8,Ue),t("a",{href:"#",onClick:I(C=>o.confirmDelete(s),["prevent"]),class:"text-danger"},e[49]||(e[49]=[t("i",{class:"bi bi-trash"},null,-1),a(" Delete ")]),8,qe)])])]),_:1},8,["modelValue","onEnd"])):(i(),d("tbody",Te,e[50]||(e[50]=[t("tr",null,[t("td",{colspan:"6"},"Loading...")],-1)])))])]),t("div",ze,[t("div",Ne,[t("div",Oe,[t("form",{onSubmit:e[22]||(e[22]=I((...s)=>o.updateExperience&&o.updateExperience(...s),["prevent"]))},[e[57]||(e[57]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"editExperienceModalLabel"},"Edit Experience"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",Ke,[t("div",Pe,[e[51]||(e[51]=t("label",{class:"form-label"},"Job Title",-1)),m(t("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>o.editForm.job_title=s),type:"text",class:"form-control"},null,512),[[c,o.editForm.job_title]])]),t("div",Re,[e[52]||(e[52]=t("label",{class:"form-label"},"Company Name",-1)),m(t("input",{"onUpdate:modelValue":e[16]||(e[16]=s=>o.editForm.company_name=s),type:"text",class:"form-control"},null,512),[[c,o.editForm.company_name]])]),t("div",Je,[e[53]||(e[53]=t("label",{class:"form-label"},"Start Date",-1)),m(t("input",{"onUpdate:modelValue":e[17]||(e[17]=s=>o.editForm.start_date=s),type:"date",class:"form-control"},null,512),[[c,o.editForm.start_date]])]),t("div",He,[e[55]||(e[55]=t("label",{class:"form-label"},"End Date",-1)),m(t("input",{"onUpdate:modelValue":e[18]||(e[18]=s=>o.editForm.end_date=s),type:"date",class:"form-control",disabled:o.editCurrentlyWorking},null,8,Qe),[[c,o.editForm.end_date]]),t("div",Ye,[m(t("input",{class:"form-check-input",type:"checkbox",id:"editCurrentlyWorking","onUpdate:modelValue":e[19]||(e[19]=s=>o.editCurrentlyWorking=s),onChange:e[20]||(e[20]=s=>o.editForm.end_date=o.editCurrentlyWorking?"":o.editForm.end_date)},null,544),[[U,o.editCurrentlyWorking]]),e[54]||(e[54]=t("label",{class:"form-check-label",for:"editCurrentlyWorking"},[t("small",null,"Currently Working")],-1))])]),t("div",Ge,[e[56]||(e[56]=t("label",{class:"form-label"},"Responsibilities",-1)),m(t("textarea",{"onUpdate:modelValue":e[21]||(e[21]=s=>o.editForm.responsibilities=s),class:"form-control",rows:"5"},null,512),[[c,o.editForm.responsibilities]])])]),e[58]||(e[58]=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel "),t("button",{type:"submit",class:"btn btn-primary"},"Update")],-1))],32)])])]),t("div",Xe,[t("div",Ze,[t("div",$e,[t("div",et,[t("div",tt,[e[59]||(e[59]=j('<div class="col-md-12 text-center circle"><i class="bi bi-exclamation-triangle-fill text-danger" style="border-radius:50%;padding:4px;background-color:#facdcd;"></i></div><div class="col-md-12 text-center mt-3"><h5 class="font-weight-bold">Are you sure?</h5></div><div class="col-md-12 text-center text-muted"><p> This action cannot be undone. All values associated this field will be lost </p></div>',3)),t("div",ot,[t("button",{type:"button",class:"btn btn-danger w-100",onClick:e[23]||(e[23]=(...s)=>o.performDelete&&o.performDelete(...s))}," Delete Field ")]),e[60]||(e[60]=t("div",{class:"col-md-12 text-center mt-2"},[t("button",{type:"button",class:"btn btn-secondary w-100","data-bs-dismiss":"modal"}," Cancel ")],-1))])])])])])])])])])])],64)}const ft=Y(G,[["render",st]]);export{ft as default};
