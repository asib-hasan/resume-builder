import{h as v,j as C,o as B,c as l,a as u,b as t,d as f,w,r as $,F as _,g as D,i,e as h,t as n,k as S}from"./index-mpPEvR65.js";import{S as I}from"./SideBar-COT6sxyv.js";import{a as b}from"./index-D8rVyQy1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={id:"main",class:"main"},A={class:"dashboard"},E={class:"row"},L={class:"col-md-12"},F={class:"nav nav-tabs nav-tabs-bordered d-flex"},T={class:"nav-item tab-style"},N={class:"tab-content"},V={class:"table-responsive"},z={class:"table table-bordered table-hover table-sm"},O=["title"],j={class:"form-check form-switch"},H=["id","onChange"],P=["id","onChange"],q=["for"],G=["onClick"],W={__name:"CSListPage",setup(J){const m=v([]),p=v(null),o=C.useToast(),c=localStorage.getItem("token"),r=async()=>{try{const a=await b.get("http://127.0.0.1:8000/api/cs",{headers:{Authorization:`Bearer ${c}`}});m.value=a.data.data}catch(a){console.error(a),o.error("Failed to load case study.")}},k=a=>{p.value=a,window.bootstrap.Modal.getOrCreateInstance(document.getElementById("deleteModal")).show()},x=async()=>{try{await b.delete(`http://127.0.0.1:8000/api/cs/${p.value}`,{headers:{Authorization:`Bearer ${c}`}}),o.success("Blog deleted successfully!"),r(),window.bootstrap.Modal.getOrCreateInstance(document.getElementById("deleteModal")).hide()}catch(a){console.error(a),o.error("Failed to delete blog.")}},g=async(a,e)=>{try{await b.put(`http://127.0.0.1:8000/api/cs/update/status/${a}`,{status:e},{headers:{Authorization:`Bearer ${c}`}}),o.success("Case study status updated!"),r()}catch(d){console.error(d),o.error("Failed to update blog status.")}};return B(()=>{r(),document.getElementById("case-study").classList.add("nav-active")}),(a,e)=>{const d=$("router-link");return i(),l(_,null,[u(I),t("main",M,[e[7]||(e[7]=f('<div class="pagetitle"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="#">Home</a></li><li class="breadcrumb-item active">Case Study</li></ol></div>',1)),t("section",A,[t("div",E,[t("div",L,[t("ul",F,[t("li",T,[u(d,{to:"/case/study/add",class:"nav-link font-weight-bold"},{default:w(()=>e[0]||(e[0]=[h("Create Case Study")])),_:1})]),e[1]||(e[1]=t("li",{class:"nav-item"},[t("a",{href:"#",class:"nav-link active font-weight-bold"},"List")],-1))]),t("div",N,[t("div",V,[t("table",z,[e[4]||(e[4]=t("thead",null,[t("tr",null,[t("th",{class:"table-th-width-30"},"Title"),t("th",{class:"table-th-width-20"},"Category"),t("th",{class:"table-th-width-10"},"Date"),t("th",{class:"table-th-width-15"},"Status"),t("th",{class:"table-th-width-15"},"Actions")])],-1)),t("tbody",null,[(i(!0),l(_,null,D(m.value,s=>(i(),l("tr",{key:s.id},[t("td",{title:s.title},n(s.title.length>40?s.title.slice(0,40)+"...":s.title),9,O),t("td",null,n(s.category),1),t("td",null,n(new Date(s.date).toLocaleDateString()),1),t("td",null,[t("div",j,[s.status==="active"?(i(),l("input",{key:0,class:"form-check-input",type:"checkbox",id:`switch-${s.id}`,checked:"",onChange:y=>g(s.id,"inactive")},null,40,H)):(i(),l("input",{key:1,class:"form-check-input",type:"checkbox",id:`switch-${s.id}`,onChange:y=>g(s.id,"active")},null,40,P)),t("label",{class:"form-check-label",for:`switch-${s.id}`},n(s.status==="active"?"Active":"Inactive"),9,q)])]),t("td",null,[u(d,{to:`/case/study/edit/${s.id}`},{default:w(()=>e[2]||(e[2]=[t("span",{class:"text-primary"},[t("i",{class:"bi bi-pencil"}),h(" Edit")],-1)])),_:2},1032,["to"]),t("a",{href:"#",onClick:S(y=>k(s.id),["prevent"]),class:"text-danger"},e[3]||(e[3]=[t("i",{class:"bi bi-trash"},null,-1),h(" Delete ")]),8,G)])]))),128))])])]),t("div",{class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"confirmDeleteLabel","aria-hidden":"true"},[t("div",{class:"modal-dialog",style:{"max-width":"400px"}},[t("div",{class:"modal-content"},[t("div",{class:"modal-body"},[t("div",{class:"row mt-3"},[e[5]||(e[5]=f('<div class="col-md-12 text-center circle"><i class="bi bi-exclamation-triangle-fill text-danger" style="border-radius:50%;padding:4px;background-color:#facdcd;"></i></div><div class="col-md-12 text-center mt-3"><h5 class="font-weight-bold">Are you sure?</h5></div><div class="col-md-12 text-center text-muted"><p>This action cannot be undone. The blog will be permanently removed.</p></div>',3)),t("div",{class:"col-md-12 text-center"},[t("button",{type:"button",class:"btn btn-danger w-100",onClick:x}," Delete Blog ")]),e[6]||(e[6]=t("div",{class:"col-md-12 text-center mt-2"},[t("button",{type:"button",class:"btn btn-secondary w-100","data-bs-dismiss":"modal"}," Cancel ")],-1))])])])])])])])])])])],64)}}};export{W as default};
