import{S as L}from"./SideBar-CoVQvkwt.js";import{_ as z,r as m,u as N}from"./index-BYVp4fHy.js";import{c as u,a as c,b as e,r as q,d as P,p as f,w as A,e as d,f as b,g as r,v as i,s as O,t as R,F as T,n as K,i as g,l as H,x as j,o as n,y as _}from"./index-CIbV6caW.js";import{a as S}from"./index-D8rVyQy1.js";import{d as G}from"./vuedraggable.umd-A9et21qD.js";const J={components:{SideBar:L,draggable:G},setup(){const v=localStorage.getItem("token"),t=K.useToast(),E=g({institute:"",city:"",degree:"",field_of_study:"",start_date:"",end_date:"",result:""}),o=g(null),V=g({institute:"",city:"",degree:"",field_of_study:"",start_date:"",end_date:"",result:""}),k=g([]),w=g(""),a=g("asc"),y=async()=>{try{const l=await S.get("http://127.0.0.1:8000/api/educations",{headers:{Authorization:`Bearer ${v}`}});l.status===200&&(k.value=Array.isArray(l.data.data)?l.data.data:[l.data.data])}catch{t.error("Error loading education records.")}};H(y);const F=j(()=>({institute:{required:m},city:{required:m},degree:{required:m},field_of_study:{required:m},start_date:{required:m},end_date:{required:m},result:{required:m}})),p=N(F,E),B=async()=>{if(!await p.value.$validate()){t.error("Please fill all fields.");return}try{(await S.post("http://127.0.0.1:8000/api/educations",E.value,{headers:{Authorization:`Bearer ${v}`}})).status===201&&(t.success("Education saved!"),y(),C())}catch(x){console.error(x),t.error("Failed to save education.")}},C=()=>{E.value={institute:"",city:"",degree:"",field_of_study:"",start_date:"",end_date:"",result:""},p.value.$reset()};return{form:E,v$:p,submitForm:B,educations:k,deleteEducation:async l=>{if(confirm("Are you sure?"))try{await S.delete(`http://127.0.0.1:8000/api/educations/${l}`,{headers:{Authorization:`Bearer ${v}`}}),t.success("Education deleted."),y()}catch{t.error("Error deleting education.")}},editEducation:l=>{V.value={...l},o.value=l.id,window.bootstrap.Modal.getOrCreateInstance(document.getElementById("editEducationModal")).show()},editForm:V,editingIndex:o,updateEducation:async()=>{if(o.value!==null)try{(await S.put(`http://127.0.0.1:8000/api/educations/${o.value}`,V.value,{headers:{Authorization:`Bearer ${v}`}})).status===200&&(t.success("Education updated!"),y(),window.bootstrap.Modal.getInstance(document.getElementById("editEducationModal")).hide())}catch{t.error("Error updating education.")}},sortKey:w,sortOrder:a,sortBy:l=>{w.value===l?a.value=a.value==="asc"?"desc":"asc":(w.value=l,a.value="asc"),k.value.sort((x,U)=>{let D=(x[l]||"").toString().toLowerCase(),M=(U[l]||"").toString().toLowerCase();return D<M?a.value==="asc"?-1:1:D>M?a.value==="asc"?1:-1:0})},onSortEnd:async()=>{try{const l=k.value.map((U,D)=>({...U,sort_order:D+1}));(await S.post("http://127.0.0.1:8000/api/update/education/order",{educations:l},{headers:{Authorization:`Bearer ${v}`}})).status===200&&t.success("Sort order updated!")}catch{t.error("Sort update failed.")}}}}},Q={id:"main",class:"main"},W={class:"dashboard"},X={class:"row"},Y={class:"col-md-12"},Z={class:"nav nav-tabs nav-tabs-bordered d-flex"},h={class:"nav-item tab-style"},$={class:"nav-item tab-style"},tt={class:"nav-item"},et={class:"nav-item tab-style"},ot={class:"nav-item tab-style"},st={class:"nav-item tab-style"},lt={class:"tab-content"},at={class:"col-md-4"},dt={key:0,class:"text-danger"},rt={class:"col-md-4"},it={key:0,class:"text-danger"},nt={class:"col-md-4"},ut={key:0,class:"text-danger"},mt={class:"col-md-4"},ct={class:"col-md-4"},ft={key:0,class:"text-danger"},bt={class:"col-md-4"},vt={key:0,class:"text-danger"},yt={class:"col-md-4"},pt={key:0,class:"text-danger"},gt={class:"col-md-12 mt-4"},_t={class:"table table-bordered table-sm"},Et=["onClick"],kt=["onClick"],wt={key:1},xt={class:"modal fade",id:"editEducationModal",tabindex:"-1","aria-labelledby":"editEducationModalLabel","aria-hidden":"true"},St={class:"modal-dialog modal-lg"},Vt={class:"modal-content"},Ft={class:"modal-body row g-3"},Bt={class:"col-md-4"},Ct={class:"col-md-4"},Dt={class:"col-md-4"},Ut={class:"col-md-4"},qt={class:"col-md-4"},It={class:"col-md-4"};function Mt(v,t,E,o,V,k){var F,p,B,C;const w=q("SideBar"),a=q("router-link"),y=q("draggable");return n(),u(T,null,[c(w),e("main",Q,[t[47]||(t[47]=P('<div class="pagetitle"><ol class="breadcrumb"><li class="breadcrumb-item active">Home</li><li class="breadcrumb-item"><a href="">My Resume</a></li></ol></div>',1)),e("section",W,[e("div",X,[e("div",Y,[e("ul",Z,[e("li",h,[c(a,{to:"/resume/profile",class:"nav-link font-weight-bold"},{default:f(()=>t[17]||(t[17]=[r("Personal")])),_:1})]),e("li",$,[c(a,{to:"/resume/experiences",class:"nav-link font-weight-bold"},{default:f(()=>t[18]||(t[18]=[r("Experience")])),_:1})]),e("li",tt,[c(a,{to:"/resume/educations",class:"nav-link active font-weight-bold"},{default:f(()=>t[19]||(t[19]=[r("Education")])),_:1})]),e("li",et,[c(a,{to:"/resume/skills",class:"nav-link font-weight-bold"},{default:f(()=>t[20]||(t[20]=[r("Skills")])),_:1})]),e("li",ot,[c(a,{to:"/resume/interest",class:"nav-link font-weight-bold"},{default:f(()=>t[21]||(t[21]=[r("Interest")])),_:1})]),e("li",st,[c(a,{to:"/resume/publications",class:"nav-link font-weight-bold"},{default:f(()=>t[22]||(t[22]=[r("Publications")])),_:1})])]),e("div",lt,[e("form",{onSubmit:t[7]||(t[7]=A((...s)=>o.submitForm&&o.submitForm(...s),["prevent"])),class:"row g-3"},[e("div",at,[t[23]||(t[23]=e("label",{class:"form-label"},[r("Institute "),e("span",{class:"required-mask"},"*")],-1)),d(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.form.institute=s),type:"text",class:"form-control"},null,512),[[i,o.form.institute]]),o.v$.institute.$dirty&&o.v$.institute.$error?(n(),u("div",dt," Institute required ")):b("",!0)]),e("div",rt,[t[24]||(t[24]=e("label",{class:"form-label"},[r("City "),e("span",{class:"required-mask"},"*")],-1)),d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.form.city=s),type:"text",class:"form-control"},null,512),[[i,o.form.city]]),o.v$.city.$dirty&&o.v$.city.$error?(n(),u("div",it,"City required")):b("",!0)]),e("div",nt,[t[25]||(t[25]=e("label",{class:"form-label"},[r("Degree "),e("span",{class:"required-mask"},"*")],-1)),d(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.form.degree=s),type:"text",class:"form-control"},null,512),[[i,o.form.degree]]),o.v$.degree.$dirty&&o.v$.degree.$error?(n(),u("div",ut," Degree required ")):b("",!0)]),e("div",mt,[t[26]||(t[26]=e("label",{class:"form-label"},"Field of Study",-1)),d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.form.field_of_study=s),type:"text",class:"form-control"},null,512),[[i,o.form.field_of_study]])]),e("div",ct,[t[27]||(t[27]=e("label",{class:"form-label"},[r("Start Date "),e("span",{class:"required-mask"},"*")],-1)),d(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.form.start_date=s),type:"date",class:"form-control"},null,512),[[i,o.form.start_date]]),o.v$.start_date.$dirty&&o.v$.start_date.$error?(n(),u("div",ft," Start date required ")):b("",!0)]),e("div",bt,[t[28]||(t[28]=e("label",{class:"form-label"},[r("End Date "),e("span",{class:"required-mask"},"*")],-1)),d(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.form.end_date=s),type:"date",class:"form-control"},null,512),[[i,o.form.end_date]]),(F=o.v$.end_date)!=null&&F.$dirty&&((p=o.v$.end_date)!=null&&p.$error)?(n(),u("div",vt," End date required ")):b("",!0)]),e("div",yt,[t[29]||(t[29]=e("label",{class:"form-label"},[r("Result "),e("span",{class:"required-mask"},"*")],-1)),d(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.form.result=s),type:"text",class:"form-control"},null,512),[[i,o.form.result]]),(B=o.v$.result)!=null&&B.$dirty&&((C=o.v$.result)!=null&&C.$error)?(n(),u("div",pt," Result required ")):b("",!0)]),t[30]||(t[30]=e("div",{class:"col-md-2"},[e("label",{class:"form-label"},"Â "),e("button",{type:"submit",class:"btn btn-primary"},"Submit")],-1))],32),e("div",gt,[e("table",_t,[e("thead",null,[e("tr",null,[e("th",{onClick:t[8]||(t[8]=s=>o.sortBy("institute")),style:{cursor:"pointer"}},[t[31]||(t[31]=r(" Institute ")),o.sortKey==="institute"?(n(),u("i",{key:0,class:R(o.sortOrder==="asc"?"bi bi-arrow-up":"bi bi-arrow-down")},null,2)):b("",!0)]),t[32]||(t[32]=e("th",null,"City",-1)),t[33]||(t[33]=e("th",null,"Degree",-1)),t[34]||(t[34]=e("th",null,"Field",-1)),t[35]||(t[35]=e("th",null,"Start Date",-1)),t[36]||(t[36]=e("th",null,"End Date",-1)),t[37]||(t[37]=e("th",null,"Actions",-1))])]),o.educations&&o.educations.length>0?(n(),O(y,{key:0,modelValue:o.educations,"onUpdate:modelValue":t[9]||(t[9]=s=>o.educations=s),tag:"tbody","item-key":"id",onEnd:o.onSortEnd},{item:f(({element:s})=>[e("tr",null,[e("td",null,_(s.institute),1),e("td",null,_(s.city),1),e("td",null,_(s.degree),1),e("td",null,_(s.field_of_study),1),e("td",null,_(new Date(s.start_date).toLocaleDateString()),1),e("td",null,_(new Date(s.end_date).toLocaleDateString()),1),e("td",null,[e("button",{class:"btn btn-sm btn-info me-1 text-white",onClick:I=>o.editEducation(s)}," Edit ",8,Et),e("button",{class:"btn btn-sm btn-danger",onClick:I=>o.deleteEducation(s.id)}," Delete ",8,kt)])])]),_:1},8,["modelValue","onEnd"])):(n(),u("tbody",wt,t[38]||(t[38]=[e("tr",null,[e("td",{colspan:"7"},"Loading...")],-1)])))])]),e("div",xt,[e("div",St,[e("div",Vt,[e("form",{onSubmit:t[16]||(t[16]=A((...s)=>o.updateEducation&&o.updateEducation(...s),["prevent"]))},[t[45]||(t[45]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"editEducationModalLabel"},"Edit Education"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",Ft,[e("div",Bt,[t[39]||(t[39]=e("label",{class:"form-label"},"Institute",-1)),d(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>o.editForm.institute=s),type:"text",class:"form-control"},null,512),[[i,o.editForm.institute]])]),e("div",Ct,[t[40]||(t[40]=e("label",{class:"form-label"},"City",-1)),d(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>o.editForm.city=s),type:"text",class:"form-control"},null,512),[[i,o.editForm.city]])]),e("div",Dt,[t[41]||(t[41]=e("label",{class:"form-label"},"Degree",-1)),d(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>o.editForm.degree=s),type:"text",class:"form-control"},null,512),[[i,o.editForm.degree]])]),e("div",Ut,[t[42]||(t[42]=e("label",{class:"form-label"},"Field of Study",-1)),d(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>o.editForm.field_of_study=s),type:"text",class:"form-control"},null,512),[[i,o.editForm.field_of_study]])]),e("div",qt,[t[43]||(t[43]=e("label",{class:"form-label"},"Start Date",-1)),d(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>o.editForm.start_date=s),type:"date",class:"form-control"},null,512),[[i,o.editForm.start_date]])]),e("div",It,[t[44]||(t[44]=e("label",{class:"form-label"},"End Date",-1)),d(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>o.editForm.end_date=s),type:"date",class:"form-control"},null,512),[[i,o.editForm.end_date]])])]),t[46]||(t[46]=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel "),e("button",{type:"submit",class:"btn btn-primary"},"Update")],-1))],32)])])])])])])])])],64)}const Kt=z(J,[["render",Mt]]);export{Kt as default};
