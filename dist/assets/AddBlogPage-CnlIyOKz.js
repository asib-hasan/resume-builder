import{h as $,j as B,o as C,c as i,a as v,b as t,d as V,w,r as x,k as q,l as g,f as u,e as n,v as b,n as f,u as a,F as h,i as d}from"./index-B_FBt44k.js";import{S as D}from"./SideBar-Ce49zaSC.js";import{C as F}from"./CustomEditor-CGAOM7K0.js";import{a as S}from"./index-D8rVyQy1.js";import{u as T,r as p}from"./index-DDjTWfF1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const N={id:"main",class:"main"},E={class:"dashboard"},U={class:"row"},I={class:"col-md-12"},M={class:"nav nav-tabs nav-tabs-bordered d-flex"},z={class:"nav-item tab-style"},A={class:"tab-content"},L={class:"col-md-6"},P={key:0,class:"error-msg"},j={class:"col-md-6"},H={key:0,class:"error-msg"},G={class:"col-md-6"},J={key:0,class:"error-msg"},K={class:"col-md-6"},O={class:"col-md-12"},Q={class:"border rounded"},R={key:0,class:"error-msg mt-1"},ae={__name:"AddBlogPage",setup(W){const s=$({title:"",category:"",date:"",image:null,description:""}),o=T({title:{required:p},category:{required:p},date:{required:p},description:{required:p}},s),c=B.useToast(),y=localStorage.getItem("token"),_=r=>{s.value.image=r.target.files[0]},k=async()=>{if(o.value.$validate(),!o.value.$error){const r=new FormData;r.append("title",s.value.title),r.append("category",s.value.category),r.append("date",s.value.date),r.append("description",s.value.description),s.value.image&&r.append("image",s.value.image);try{(await S.post("http://127.0.0.1:8000/api/blogs",r,{headers:{Authorization:`Bearer ${y}`,"Content-Type":"multipart/form-data"}})).status==201?(c.success("Blog posted successfully!"),s.value={title:"",category:"",date:"",image:null,description:""},o.value.$reset()):c.error("Failed to post blog.")}catch(e){if(console.error(e),e.response&&e.response.status===422){const m=e.response.data.errors;for(const l in m)c.error(m[l][0])}else c.error("Server error occurred."),console.error(e)}}};return C(()=>{document.getElementById("my-blog").classList.add("nav-active")}),(r,e)=>{const m=x("router-link");return d(),i(h,null,[v(D),t("main",N,[e[12]||(e[12]=V('<div class="pagetitle"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="#">Home</a></li><li class="breadcrumb-item active">Blog</li></ol></div>',1)),t("section",E,[t("div",U,[t("div",I,[t("ul",M,[e[5]||(e[5]=t("li",{class:"nav-item"},[t("a",{href:"#",class:"nav-link active font-weight-bold"},"Create Blog")],-1)),t("li",z,[v(m,{to:"/blog/list",class:"nav-link font-weight-bold"},{default:w(()=>e[4]||(e[4]=[n("List")])),_:1})])]),t("div",A,[t("form",{onSubmit:q(k,["prevent"]),class:"row g-3"},[t("div",L,[e[6]||(e[6]=t("label",{class:"form-label"},[n("Title "),t("span",{class:"required-mask"},"*")],-1)),g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.title=l),type:"text",class:f(["form-control",{"is-invalid":a(o).title.$dirty&&a(o).title.$error}])},null,2),[[b,s.value.title]]),a(o).title.$error?(d(),i("div",P,"Title required")):u("",!0)]),t("div",j,[e[7]||(e[7]=t("label",{class:"form-label"},[n("Category "),t("span",{class:"required-mask"},"*")],-1)),g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.category=l),type:"text",class:f(["form-control",{"is-invalid":a(o).category.$dirty&&a(o).category.$error}])},null,2),[[b,s.value.category]]),a(o).category.$error?(d(),i("div",H,"Category required")):u("",!0)]),t("div",G,[e[8]||(e[8]=t("label",{class:"form-label"},[n("Date "),t("span",{class:"required-mask"},"*")],-1)),g(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.date=l),type:"date",class:f(["form-control",{"is-invalid":a(o).date.$dirty&&a(o).date.$error}])},null,2),[[b,s.value.date]]),a(o).date.$error?(d(),i("span",J,"Date required")):u("",!0)]),t("div",K,[e[9]||(e[9]=t("label",{class:"form-label"},"Image",-1)),t("input",{type:"file",onChange:_,class:"form-control"},null,32)]),t("div",O,[e[10]||(e[10]=t("label",{class:"form-label"},[n("Description "),t("span",{class:"required-mask"},"*")],-1)),t("div",Q,[v(F,{modelValue:s.value.description,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.description=l)},null,8,["modelValue"])]),a(o).description.$error?(d(),i("div",R,"Description required")):u("",!0)]),e[11]||(e[11]=t("div",{class:"col-md-2"},[t("label",{class:"form-label"},"Â "),t("button",{type:"submit",class:"btn btn-primary"},"Post Blog")],-1))],32)])])])])])],64)}}};export{ae as default};
