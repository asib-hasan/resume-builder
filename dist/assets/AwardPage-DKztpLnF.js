import{S as q}from"./SideBar-Ce49zaSC.js";import{r as I,u as z}from"./index-DDjTWfF1.js";import{c as m,a as d,b as s,r as B,d as V,w as n,k as _,l as S,f as C,e as r,v as D,n as E,q as F,A as U,F as N,j as O,h as v,o as P,B as H,i as u,t as K}from"./index-B_FBt44k.js";import{a as g}from"./index-D8rVyQy1.js";import{d as j}from"./vuedraggable.umd-D5KFg2wK.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $={components:{SideBar:q,draggable:j},setup(){const b=localStorage.getItem("token"),t=O.useToast(),p=v({title:"",status:""}),e=v(null),k=v({title:"",status:""}),w=v([]),y=v(""),l=v("asc"),A=v({id:null,title:"",status:""}),o=async()=>{try{const a=await g.get("http://127.0.0.1:8000/api/awards",{headers:{Authorization:`Bearer ${b}`}});a.status===200&&(w.value=Array.isArray(a.data.data)?a.data.data:[a.data.data])}catch{t.error("Error loading awards.")}};P(()=>{document.getElementById("my-resume").classList.add("nav-active"),o()});const h=H(()=>({title:{required:I},status:{required:I}})),x=z(h,p),T=async()=>{if(await x.value.$validate())try{(await g.post("http://127.0.0.1:8000/api/awards",p.value,{headers:{Authorization:`Bearer ${b}`}})).status===201&&(t.success("Award saved!"),o(),L())}catch(i){if(i.response&&i.response.status===422){const c=i.response.data.errors;for(const f in c)t.error(c[f][0])}else t.error("Server error occurred."),console.error(i)}},L=()=>{p.value={title:"",status:""},x.value.$reset()};return{form:p,v$:x,submitForm:T,awards:w,editAward:a=>{k.value={...a},e.value=a.id,window.bootstrap.Modal.getOrCreateInstance(document.getElementById("editAwardModal")).show()},editForm:k,editingIndex:e,updateAward:async()=>{if(e.value!==null)try{(await g.put(`http://127.0.0.1:8000/api/awards/${e.value}`,k.value,{headers:{Authorization:`Bearer ${b}`}})).status===200&&(t.success("Award updated!"),o(),window.bootstrap.Modal.getInstance(document.getElementById("editAwardModal")).hide())}catch(a){if(a.response&&a.response.status===422){const i=a.response.data.errors;for(const c in i)t.error(i[c][0])}else t.error("Server error occurred."),console.error(a)}},sortKey:y,sortOrder:l,sortBy:a=>{y.value===a?l.value=l.value==="asc"?"desc":"asc":(y.value=a,l.value="asc"),w.value.sort((i,c)=>{let f=(i[a]||"").toString().toLowerCase(),M=(c[a]||"").toString().toLowerCase();return f<M?l.value==="asc"?-1:1:f>M?l.value==="asc"?1:-1:0})},onSortEnd:async()=>{try{const a=w.value.map((c,f)=>({...c,sort_order:f+1}));(await g.post("http://127.0.0.1:8000/api/update/award/order",{awards:a},{headers:{Authorization:`Bearer ${b}`}})).status===200&&t.success("Sort order updated!")}catch{t.error("Sort update failed.")}},confirmDelete:a=>{A.value={id:a.id,title:a.title},window.bootstrap.Modal.getOrCreateInstance(document.getElementById("deleteModal")).show()},performDelete:async()=>{try{await g.delete(`http://127.0.0.1:8000/api/awards/${A.value.id}`,{headers:{Authorization:`Bearer ${b}`}}),t.success("Certification deleted!"),o()}catch{t.error("Delete failed.")}finally{window.bootstrap.Modal.getInstance(document.getElementById("deleteModal")).hide()}}}}},G={id:"main",class:"main"},J={class:"dashboard"},Q={class:"row"},W={class:"col-md-12"},X={class:"nav nav-tabs nav-tabs-bordered d-flex"},Y={class:"nav-item tab-style"},Z={class:"nav-item tab-style"},tt={class:"nav-item tab-style"},st={class:"nav-item tab-style"},et={class:"nav-item tab-style"},ot={class:"nav-item tab-style"},at={class:"nav-item tab-style"},lt={class:"nav-item tab-style"},rt={class:"nav-item"},it={class:"tab-content"},dt={class:"col-md-6"},nt={key:0,class:"error-msg"},ct={class:"col-md-4"},ut={key:0,class:"error-msg"},mt={class:"col-md-12 mt-4"},vt={class:"table table-bordered table-sm"},bt={key:0,class:"badge bg-success"},ft={key:1,class:"badge bg-warning text-dark"},pt=["onClick"],wt=["onClick"],yt={key:1},gt={class:"modal fade",id:"editAwardModal",tabindex:"-1","aria-labelledby":"editAwardModalLabel","aria-hidden":"true"},kt={class:"modal-dialog"},At={class:"modal-content"},_t={class:"modal-body row g-3"},St={class:"col-md-6"},ht={class:"col-md-6"},xt={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-hidden":"true"},Bt={class:"modal-dialog",style:{"max-width":"400px"}},Ct={class:"modal-content"},Et={class:"modal-body"},Mt={class:"row mt-3 text-center"},It={class:"col-md-12"};function Vt(b,t,p,e,k,w){const y=B("SideBar"),l=B("router-link"),A=B("draggable");return u(),m(N,null,[d(y),s("main",G,[t[35]||(t[35]=V('<div class="pagetitle"><ol class="breadcrumb"><li class="breadcrumb-item active">Home</li><li class="breadcrumb-item"><a href="">My Resume</a></li></ol></div>',1)),s("section",J,[s("div",Q,[s("div",W,[s("ul",X,[s("li",Y,[d(l,{to:"/resume/profile",class:"nav-link font-weight-bold"},{default:n(()=>t[9]||(t[9]=[r("Personal")])),_:1})]),s("li",Z,[d(l,{to:"/resume/experiences",class:"nav-link font-weight-bold"},{default:n(()=>t[10]||(t[10]=[r("Experience")])),_:1})]),s("li",tt,[d(l,{to:"/resume/educations",class:"nav-link font-weight-bold"},{default:n(()=>t[11]||(t[11]=[r("Education")])),_:1})]),s("li",st,[d(l,{to:"/resume/skills",class:"nav-link font-weight-bold"},{default:n(()=>t[12]||(t[12]=[r("Skills")])),_:1})]),s("li",et,[d(l,{to:"/resume/interests",class:"nav-link font-weight-bold"},{default:n(()=>t[13]||(t[13]=[r("Interest")])),_:1})]),s("li",ot,[d(l,{to:"/resume/publications",class:"nav-link font-weight-bold"},{default:n(()=>t[14]||(t[14]=[r("Publications")])),_:1})]),s("li",at,[d(l,{to:"/resume/languages",class:"nav-link font-weight-bold"},{default:n(()=>t[15]||(t[15]=[r("Language")])),_:1})]),s("li",lt,[d(l,{to:"/resume/certifications",class:"nav-link font-weight-bold"},{default:n(()=>t[16]||(t[16]=[r("Certifications")])),_:1})]),s("li",rt,[d(l,{to:"/resume/awards",class:"nav-link active font-weight-bold"},{default:n(()=>t[17]||(t[17]=[r("Awards & Honors")])),_:1})])]),s("div",it,[s("form",{onSubmit:t[2]||(t[2]=_((...o)=>e.submitForm&&e.submitForm(...o),["prevent"])),class:"row g-3"},[s("div",dt,[t[18]||(t[18]=s("label",{class:"form-label"},[r("Title "),s("span",{class:"required-mask"},"*")],-1)),S(s("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.form.title=o),type:"text",class:E(["form-control",{"is-invalid":e.v$.title.$dirty&&e.v$.title.$error}])},null,2),[[D,e.form.title]]),e.v$.title.$dirty&&e.v$.title.$error?(u(),m("span",nt," Title required ")):C("",!0)]),s("div",ct,[t[20]||(t[20]=s("label",{class:"form-label"},[r("Status "),s("span",{class:"required-mask"},"*")],-1)),S(s("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.status=o),class:E(["form-control",{"is-invalid":e.v$.status.$dirty&&e.v$.status.$error}])},t[19]||(t[19]=[s("option",{value:""},"Select",-1),s("option",{value:"active"},"Active",-1),s("option",{value:"inactive"},"Inactive",-1)]),2),[[F,e.form.status]]),e.v$.status.$dirty&&e.v$.status.$error?(u(),m("span",ut," Status required ")):C("",!0)]),t[21]||(t[21]=s("div",{class:"col-md-2"},[s("label",{class:"form-label"},"Â "),s("button",{type:"submit",class:"btn btn-primary"},"Submit")],-1))],32),s("div",mt,[s("table",vt,[s("thead",null,[s("tr",null,[s("th",{onClick:t[3]||(t[3]=o=>e.sortBy("title")),style:{cursor:"pointer"}},[t[22]||(t[22]=r(" Title ")),e.sortKey==="title"?(u(),m("i",{key:0,class:E(e.sortOrder==="asc"?"bi bi-arrow-up":"bi bi-arrow-down")},null,2)):C("",!0)]),t[23]||(t[23]=s("th",null,"Status",-1)),t[24]||(t[24]=s("th",null,"Actions",-1))])]),e.awards&&e.awards.length>0?(u(),U(A,{key:0,modelValue:e.awards,"onUpdate:modelValue":t[4]||(t[4]=o=>e.awards=o),tag:"tbody","item-key":"id",onEnd:e.onSortEnd},{item:n(({element:o})=>[s("tr",null,[s("td",null,K(o.title),1),s("td",null,[o.status==="active"?(u(),m("span",bt," Active ")):(u(),m("span",ft," Inactive "))]),s("td",null,[s("a",{href:"#",onClick:_(h=>e.editAward(o),["prevent"]),class:"text-primary"},t[25]||(t[25]=[s("i",{class:"bi bi-pencil"},null,-1),r(" Edit ")]),8,pt),s("a",{href:"#",onClick:_(h=>e.confirmDelete(o),["prevent"]),class:"text-danger"},t[26]||(t[26]=[s("i",{class:"bi bi-trash"},null,-1),r(" Delete ")]),8,wt)])])]),_:1},8,["modelValue","onEnd"])):(u(),m("tbody",yt,t[27]||(t[27]=[s("tr",null,[s("td",{colspan:"3"},"Loading...")],-1)])))])]),s("div",gt,[s("div",kt,[s("div",At,[s("form",{onSubmit:t[7]||(t[7]=_((...o)=>e.updateAward&&e.updateAward(...o),["prevent"]))},[t[31]||(t[31]=s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"editAwardModalLabel"},"Edit Award"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),s("div",_t,[s("div",St,[t[28]||(t[28]=s("label",{class:"form-label"},"Title",-1)),S(s("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>e.editForm.title=o),type:"text",class:"form-control"},null,512),[[D,e.editForm.title]])]),s("div",ht,[t[30]||(t[30]=s("label",{class:"form-label"},"Status",-1)),S(s("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>e.editForm.status=o),class:"form-control"},t[29]||(t[29]=[s("option",{value:""},"Select Status",-1),s("option",{value:"active"},"Active",-1),s("option",{value:"inactive"},"Inactive",-1)]),512),[[F,e.editForm.status]])])]),t[32]||(t[32]=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel "),s("button",{type:"submit",class:"btn btn-primary"},"Update")],-1))],32)])])]),s("div",xt,[s("div",Bt,[s("div",Ct,[s("div",Et,[s("div",Mt,[t[34]||(t[34]=V('<div class="col-md-12 circle"><i class="bi bi-exclamation-triangle-fill text-danger" style="background-color:#facdcd;padding:4px;border-radius:50%;"></i></div><div class="col-md-12 mt-3"><h5 class="font-weight-bold">Are you sure?</h5><p class="text-muted"> This action cannot be undone. All values associated with this field will be lost. </p></div>',2)),s("div",It,[s("button",{type:"button",class:"btn btn-danger w-100",onClick:t[8]||(t[8]=(...o)=>e.performDelete&&e.performDelete(...o))}," Delete Field "),t[33]||(t[33]=s("button",{type:"button",class:"btn btn-secondary w-100 mt-2","data-bs-dismiss":"modal"}," Cancel ",-1))])])])])])])])])])])])],64)}const jt=R($,[["render",Vt]]);export{jt as default};
