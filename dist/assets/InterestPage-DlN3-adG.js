import{S}from"./SideBar-COT6sxyv.js";import{r as x,u as D}from"./index-C3a4g50J.js";import{c as g,a as n,b as e,r as w,d as V,w as i,k as I,l as h,f as B,e as o,v as C,n as E,A as F,t as M,F as z,j as N,h as v,B as L,o as T,i as f}from"./index-mpPEvR65.js";import{a as p}from"./index-D8rVyQy1.js";import{d as U}from"./vuedraggable.umd-DRImxRg-.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={components:{SideBar:S,draggable:U},setup(){const d=localStorage.getItem("token"),t=N.useToast(),m=v({area:""}),s=v({area:""}),u=v(null),y=v([]),b=v({id:null,area:""}),r=L(()=>({area:{required:x}})),c=D(r,m),a=async()=>{try{const l=await p.get("http://127.0.0.1:8000/api/interests",{headers:{Authorization:`Bearer ${d}`}});y.value=Array.isArray(l.data.data)?l.data.data:[l.data.data]}catch{t.error("Error loading interests.")}};return T(()=>{document.getElementById("my-resume").classList.add("nav-active"),a()}),{form:m,v$:c,submitForm:async()=>{if(await c.value.$validate())try{(await p.post("http://127.0.0.1:8000/api/interests",m.value,{headers:{Authorization:`Bearer ${d}`}})).status===201&&(t.success("Interest added!"),a(),m.value={area:""},c.value.$reset())}catch{t.error("Error adding interest.")}},interests:y,editForm:s,editingId:u,editInterest:l=>{s.value={area:l.area},u.value=l.id,window.bootstrap.Modal.getOrCreateInstance(document.getElementById("editModal")).show()},updateInterest:async()=>{if(u.value)try{(await p.put(`http://127.0.0.1:8000/api/interests/${u.value}`,s.value,{headers:{Authorization:`Bearer ${d}`}})).status===200&&(t.success("Interest updated!"),a(),window.bootstrap.Modal.getInstance(document.getElementById("editModal")).hide())}catch{t.error("Update failed.")}},confirmDelete:l=>{b.value={id:l.id,area:l.area},window.bootstrap.Modal.getOrCreateInstance(document.getElementById("deleteModal")).show()},performDelete:async()=>{try{await p.delete(`http://127.0.0.1:8000/api/interests/${b.value.id}`,{headers:{Authorization:`Bearer ${d}`}}),t.success("Interest deleted!"),a()}catch{t.error("Delete failed.")}finally{window.bootstrap.Modal.getInstance(document.getElementById("deleteModal")).hide()}},deleteTarget:b,onSortEnd:async()=>{try{const l=y.value.map((_,A)=>({..._,sort_order:A+1}));await p.post("http://127.0.0.1:8000/api/update/interest/order",{interests:l},{headers:{Authorization:`Bearer ${d}`}}),t.success("Order updated!")}catch{t.error("Sort order update failed.")}}}}},P={id:"main",class:"main"},$={class:"dashboard"},H={class:"row"},j={class:"col-md-12"},K={class:"nav nav-tabs nav-tabs-bordered d-flex"},R={class:"nav-item tab-style"},G={class:"nav-item tab-style"},J={class:"nav-item tab-style"},Q={class:"nav-item tab-style"},W={class:"nav-item"},X={class:"nav-item tab-style"},Y={class:"nav-item tab-style"},Z={class:"nav-item tab-style"},tt={class:"nav-item tab-style"},et={class:"tab-content"},st={class:"col-md-6"},at={key:0,class:"error-msg"},ot={class:"col-md-12 mt-4"},lt={class:"table table-bordered table-sm"},rt=["onClick"],nt=["onClick"],it={key:1},dt={class:"modal fade",id:"editModal",tabindex:"-1","aria-labelledby":"editModalLabel","aria-hidden":"true"},mt={class:"modal-dialog"},ut={class:"modal-content"},bt={class:"modal-body row g-3"},ct={class:"col-md-12"},vt={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"confirmDeleteLabel","aria-hidden":"true"},ft={class:"modal-dialog"},pt={class:"modal-content"},yt={class:"modal-body"},gt={class:"modal-footer"};function wt(d,t,m,s,u,y){const b=w("SideBar"),r=w("router-link"),c=w("draggable");return f(),g(z,null,[n(b),e("main",P,[t[30]||(t[30]=V('<div class="pagetitle"><ol class="breadcrumb"><li class="breadcrumb-item active">Home</li><li class="breadcrumb-item"><a href="">My Resume</a></li></ol></div>',1)),e("section",$,[e("div",H,[e("div",j,[e("ul",K,[e("li",R,[n(r,{to:"/resume/profile",class:"nav-link font-weight-bold"},{default:i(()=>t[7]||(t[7]=[o("Personal")])),_:1})]),e("li",G,[n(r,{to:"/resume/experiences",class:"nav-link font-weight-bold"},{default:i(()=>t[8]||(t[8]=[o("Experience")])),_:1})]),e("li",J,[n(r,{to:"/resume/educations",class:"nav-link font-weight-bold"},{default:i(()=>t[9]||(t[9]=[o("Education")])),_:1})]),e("li",Q,[n(r,{to:"/resume/skills",class:"nav-link font-weight-bold"},{default:i(()=>t[10]||(t[10]=[o("Skills")])),_:1})]),e("li",W,[n(r,{to:"/resume/interests",class:"nav-link active font-weight-bold"},{default:i(()=>t[11]||(t[11]=[o("Interest")])),_:1})]),e("li",X,[n(r,{to:"/resume/publications",class:"nav-link font-weight-bold"},{default:i(()=>t[12]||(t[12]=[o("Publications")])),_:1})]),e("li",Y,[n(r,{to:"/resume/languages",class:"nav-link font-weight-bold"},{default:i(()=>t[13]||(t[13]=[o("Language")])),_:1})]),e("li",Z,[n(r,{to:"/resume/certifications",class:"nav-link font-weight-bold"},{default:i(()=>t[14]||(t[14]=[o("Certifications")])),_:1})]),e("li",tt,[n(r,{to:"/resume/awards",class:"nav-link font-weight-bold"},{default:i(()=>t[15]||(t[15]=[o("Awards & Honors")])),_:1})])]),e("div",et,[e("form",{onSubmit:t[1]||(t[1]=I((...a)=>s.submitForm&&s.submitForm(...a),["prevent"])),class:"row g-3"},[e("div",st,[t[16]||(t[16]=e("label",{class:"form-label"},[o("Area "),e("span",{class:"required-mask"},"*")],-1)),h(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>s.form.area=a),type:"text",class:E(["form-control",{"is-invalid":s.v$.area.$dirty&&s.v$.area.$error}])},null,2),[[C,s.form.area]]),s.v$.area.$dirty&&s.v$.area.$error?(f(),g("span",at,"Area required.")):B("",!0)]),t[17]||(t[17]=e("div",{class:"col-md-2"},[e("label",{class:"form-label"},"Â "),e("button",{type:"submit",class:"btn btn-primary"},"Submit")],-1))],32),e("div",ot,[e("table",lt,[e("thead",null,[e("tr",null,[e("th",{onClick:t[2]||(t[2]=a=>d.sortBy("area")),style:{cursor:"pointer"}},[t[18]||(t[18]=o(" Area ")),d.sortKey==="area"?(f(),g("i",{key:0,class:E(d.sortOrder==="asc"?"bi bi-arrow-up":"bi bi-arrow-down")},null,2)):B("",!0)]),t[19]||(t[19]=e("th",null,"Actions",-1))])]),s.interests&&s.interests.length>0?(f(),F(c,{key:0,modelValue:s.interests,"onUpdate:modelValue":t[3]||(t[3]=a=>s.interests=a),tag:"tbody","item-key":"id",onEnd:s.onSortEnd},{item:i(({element:a})=>[e("tr",null,[e("td",null,M(a.area),1),e("td",null,[e("a",{href:"#",onClick:k=>s.editInterest(a),class:"text-primary"},t[20]||(t[20]=[e("i",{class:"bi bi-pencil"},null,-1),o(" Edit ")]),8,rt),e("a",{href:"#",onClick:k=>s.confirmDelete(a),class:"text-danger"},t[21]||(t[21]=[e("i",{class:"bi bi-trash"},null,-1),o(" Delete ")]),8,nt)])])]),_:1},8,["modelValue","onEnd"])):(f(),g("tbody",it,t[22]||(t[22]=[e("tr",null,[e("td",{colspan:"3",class:"maroon"},"No records")],-1)])))])]),e("div",dt,[e("div",mt,[e("div",ut,[e("form",{onSubmit:t[5]||(t[5]=I((...a)=>s.updateInterest&&s.updateInterest(...a),["prevent"]))},[t[24]||(t[24]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"editModalLabel"},"Edit Interest"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",bt,[e("div",ct,[t[23]||(t[23]=e("label",{class:"form-label"},"Area",-1)),h(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>s.editForm.area=a),type:"text",class:"form-control"},null,512),[[C,s.editForm.area]])])]),t[25]||(t[25]=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel "),e("button",{type:"submit",class:"btn btn-primary"},"Update")],-1))],32)])])]),e("div",vt,[e("div",ft,[e("div",pt,[t[29]||(t[29]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"deleteModal"},"Confirm Delete"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",yt,[t[26]||(t[26]=o(' Are you sure you want to delete "')),e("strong",null,M(s.deleteTarget.area),1),t[27]||(t[27]=o('"? '))]),e("div",gt,[t[28]||(t[28]=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel ",-1)),e("button",{type:"button",class:"btn btn-danger",onClick:t[6]||(t[6]=(...a)=>s.performDelete&&s.performDelete(...a))}," Delete ")])])])])])])])])])],64)}const Dt=O(q,[["render",wt]]);export{Dt as default};
