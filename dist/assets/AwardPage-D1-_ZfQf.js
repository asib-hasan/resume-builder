import{S as U}from"./SideBar-CoVQvkwt.js";import{_ as q,r as V,u as L}from"./index-BYVp4fHy.js";import{c as m,a as d,b as s,r as B,d as I,p as n,w as _,e as S,f as C,g as r,v as D,t as M,h as F,s as N,F as O,n as P,i as v,l as H,x as K,o as u,y as R}from"./index-CIbV6caW.js";import{a as g}from"./index-D8rVyQy1.js";import{d as $}from"./vuedraggable.umd-A9et21qD.js";const j={components:{SideBar:U,draggable:$},setup(){const b=localStorage.getItem("token"),t=P.useToast(),p=v({title:"",status:""}),e=v(null),k=v({title:"",status:""}),w=v([]),y=v(""),l=v("asc"),A=v({id:null,title:"",status:""}),o=async()=>{try{const a=await g.get("http://127.0.0.1:8000/api/awards",{headers:{Authorization:`Bearer ${b}`}});a.status===200&&(w.value=Array.isArray(a.data.data)?a.data.data:[a.data.data])}catch{t.error("Error loading awards.")}};H(o);const x=K(()=>({title:{required:V},status:{required:V}})),h=L(x,p),T=async()=>{if(await h.value.$validate())try{(await g.post("http://127.0.0.1:8000/api/awards",p.value,{headers:{Authorization:`Bearer ${b}`}})).status===201&&(t.success("Award saved!"),o(),z())}catch(i){if(i.response&&i.response.status===422){const c=i.response.data.errors;for(const f in c)t.error(c[f][0])}else t.error("Server error occurred."),console.error(i)}},z=()=>{p.value={title:"",status:""},h.value.$reset()};return{form:p,v$:h,submitForm:T,awards:w,editAward:a=>{k.value={...a},e.value=a.id,window.bootstrap.Modal.getOrCreateInstance(document.getElementById("editAwardModal")).show()},editForm:k,editingIndex:e,updateAward:async()=>{if(e.value!==null)try{(await g.put(`http://127.0.0.1:8000/api/awards/${e.value}`,k.value,{headers:{Authorization:`Bearer ${b}`}})).status===200&&(t.success("Award updated!"),o(),window.bootstrap.Modal.getInstance(document.getElementById("editAwardModal")).hide())}catch(a){if(a.response&&a.response.status===422){const i=a.response.data.errors;for(const c in i)t.error(i[c][0])}else t.error("Server error occurred."),console.error(a)}},sortKey:y,sortOrder:l,sortBy:a=>{y.value===a?l.value=l.value==="asc"?"desc":"asc":(y.value=a,l.value="asc"),w.value.sort((i,c)=>{let f=(i[a]||"").toString().toLowerCase(),E=(c[a]||"").toString().toLowerCase();return f<E?l.value==="asc"?-1:1:f>E?l.value==="asc"?1:-1:0})},onSortEnd:async()=>{try{const a=w.value.map((c,f)=>({...c,sort_order:f+1}));(await g.post("http://127.0.0.1:8000/api/update/award/order",{awards:a},{headers:{Authorization:`Bearer ${b}`}})).status===200&&t.success("Sort order updated!")}catch{t.error("Sort update failed.")}},confirmDelete:a=>{A.value={id:a.id,title:a.title},window.bootstrap.Modal.getOrCreateInstance(document.getElementById("deleteModal")).show()},performDelete:async()=>{try{await g.delete(`http://127.0.0.1:8000/api/awards/${A.value.id}`,{headers:{Authorization:`Bearer ${b}`}}),t.success("Certification deleted!"),o()}catch{t.error("Delete failed.")}finally{window.bootstrap.Modal.getInstance(document.getElementById("deleteModal")).hide()}}}}},G={id:"main",class:"main"},J={class:"dashboard"},Q={class:"row"},W={class:"col-md-12"},X={class:"nav nav-tabs nav-tabs-bordered d-flex"},Y={class:"nav-item tab-style"},Z={class:"nav-item tab-style"},tt={class:"nav-item tab-style"},st={class:"nav-item tab-style"},et={class:"nav-item tab-style"},ot={class:"nav-item tab-style"},at={class:"nav-item tab-style"},lt={class:"nav-item"},rt={class:"tab-content"},it={class:"col-md-6"},dt={key:0,class:"error-msg"},nt={class:"col-md-4"},ct={key:0,class:"error-msg"},ut={class:"col-md-12 mt-4"},mt={class:"table table-bordered table-sm"},vt={key:0,class:"badge bg-success"},bt={key:1,class:"badge bg-warning text-dark"},ft=["onClick"],pt=["onClick"],wt={key:1},yt={class:"modal fade",id:"editAwardModal",tabindex:"-1","aria-labelledby":"editAwardModalLabel","aria-hidden":"true"},gt={class:"modal-dialog"},kt={class:"modal-content"},At={class:"modal-body row g-3"},_t={class:"col-md-6"},St={class:"col-md-6"},xt={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-hidden":"true"},ht={class:"modal-dialog",style:{"max-width":"400px"}},Bt={class:"modal-content"},Ct={class:"modal-body"},Mt={class:"row mt-3 text-center"},Et={class:"col-md-12"};function Vt(b,t,p,e,k,w){const y=B("SideBar"),l=B("router-link"),A=B("draggable");return u(),m(O,null,[d(y),s("main",G,[t[34]||(t[34]=I('<div class="pagetitle"><ol class="breadcrumb"><li class="breadcrumb-item active">Home</li><li class="breadcrumb-item"><a href="">My Resume</a></li></ol></div>',1)),s("section",J,[s("div",Q,[s("div",W,[s("ul",X,[s("li",Y,[d(l,{to:"/resume/profile",class:"nav-link font-weight-bold"},{default:n(()=>t[9]||(t[9]=[r("Personal")])),_:1})]),s("li",Z,[d(l,{to:"/resume/experiences",class:"nav-link font-weight-bold"},{default:n(()=>t[10]||(t[10]=[r("Experience")])),_:1})]),s("li",tt,[d(l,{to:"/resume/educations",class:"nav-link font-weight-bold"},{default:n(()=>t[11]||(t[11]=[r("Education")])),_:1})]),s("li",st,[d(l,{to:"/resume/skills",class:"nav-link font-weight-bold"},{default:n(()=>t[12]||(t[12]=[r("Skills")])),_:1})]),s("li",et,[d(l,{to:"/resume/interest",class:"nav-link font-weight-bold"},{default:n(()=>t[13]||(t[13]=[r("Interest")])),_:1})]),s("li",ot,[d(l,{to:"/resume/publications",class:"nav-link font-weight-bold"},{default:n(()=>t[14]||(t[14]=[r("Publications")])),_:1})]),s("li",at,[d(l,{to:"/resume/certifications",class:"nav-link font-weight-bold"},{default:n(()=>t[15]||(t[15]=[r("Certifications")])),_:1})]),s("li",lt,[d(l,{to:"/resume/awards",class:"nav-link active font-weight-bold"},{default:n(()=>t[16]||(t[16]=[r("Awards & Honors")])),_:1})])]),s("div",rt,[s("form",{onSubmit:t[2]||(t[2]=_((...o)=>e.submitForm&&e.submitForm(...o),["prevent"])),class:"row g-3"},[s("div",it,[t[17]||(t[17]=s("label",{class:"form-label"},[r("Title "),s("span",{class:"required-mask"},"*")],-1)),S(s("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.form.title=o),type:"text",class:M(["form-control",{"is-invalid":e.v$.title.$dirty&&e.v$.title.$error}])},null,2),[[D,e.form.title]]),e.v$.title.$dirty&&e.v$.title.$error?(u(),m("span",dt," Title required ")):C("",!0)]),s("div",nt,[t[19]||(t[19]=s("label",{class:"form-label"},[r("Status "),s("span",{class:"required-mask"},"*")],-1)),S(s("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.status=o),class:M(["form-control",{"is-invalid":e.v$.status.$dirty&&e.v$.status.$error}])},t[18]||(t[18]=[s("option",{value:""},"Select",-1),s("option",{value:"active"},"Active",-1),s("option",{value:"inactive"},"Inactive",-1)]),2),[[F,e.form.status]]),e.v$.status.$dirty&&e.v$.status.$error?(u(),m("span",ct," Status required ")):C("",!0)]),t[20]||(t[20]=s("div",{class:"col-md-2"},[s("label",{class:"form-label"},"Â "),s("button",{type:"submit",class:"btn btn-primary"},"Submit")],-1))],32),s("div",ut,[s("table",mt,[s("thead",null,[s("tr",null,[s("th",{onClick:t[3]||(t[3]=o=>e.sortBy("title")),style:{cursor:"pointer"}},[t[21]||(t[21]=r(" Title ")),e.sortKey==="title"?(u(),m("i",{key:0,class:M(e.sortOrder==="asc"?"bi bi-arrow-up":"bi bi-arrow-down")},null,2)):C("",!0)]),t[22]||(t[22]=s("th",null,"Status",-1)),t[23]||(t[23]=s("th",null,"Actions",-1))])]),e.awards&&e.awards.length>0?(u(),N(A,{key:0,modelValue:e.awards,"onUpdate:modelValue":t[4]||(t[4]=o=>e.awards=o),tag:"tbody","item-key":"id",onEnd:e.onSortEnd},{item:n(({element:o})=>[s("tr",null,[s("td",null,R(o.title),1),s("td",null,[o.status==="active"?(u(),m("span",vt," Active ")):(u(),m("span",bt," Inactive "))]),s("td",null,[s("a",{href:"#",onClick:_(x=>e.editAward(o),["prevent"]),class:"text-primary"},t[24]||(t[24]=[s("i",{class:"bi bi-pencil"},null,-1),r(" Edit ")]),8,ft),s("a",{href:"#",onClick:_(x=>e.confirmDelete(o),["prevent"]),class:"text-danger"},t[25]||(t[25]=[s("i",{class:"bi bi-trash"},null,-1),r(" Delete ")]),8,pt)])])]),_:1},8,["modelValue","onEnd"])):(u(),m("tbody",wt,t[26]||(t[26]=[s("tr",null,[s("td",{colspan:"3"},"Loading...")],-1)])))])]),s("div",yt,[s("div",gt,[s("div",kt,[s("form",{onSubmit:t[7]||(t[7]=_((...o)=>e.updateAward&&e.updateAward(...o),["prevent"]))},[t[30]||(t[30]=s("div",{class:"modal-header"},[s("h5",{class:"modal-title",id:"editAwardModalLabel"},"Edit Award"),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),s("div",At,[s("div",_t,[t[27]||(t[27]=s("label",{class:"form-label"},"Title",-1)),S(s("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>e.editForm.title=o),type:"text",class:"form-control"},null,512),[[D,e.editForm.title]])]),s("div",St,[t[29]||(t[29]=s("label",{class:"form-label"},"Status",-1)),S(s("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>e.editForm.status=o),class:"form-control"},t[28]||(t[28]=[s("option",{value:""},"Select Status",-1),s("option",{value:"active"},"Active",-1),s("option",{value:"inactive"},"Inactive",-1)]),512),[[F,e.editForm.status]])])]),t[31]||(t[31]=s("div",{class:"modal-footer"},[s("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel "),s("button",{type:"submit",class:"btn btn-primary"},"Update")],-1))],32)])])]),s("div",xt,[s("div",ht,[s("div",Bt,[s("div",Ct,[s("div",Mt,[t[33]||(t[33]=I('<div class="col-md-12 circle"><i class="bi bi-exclamation-triangle-fill text-danger" style="background-color:#facdcd;padding:4px;border-radius:50%;"></i></div><div class="col-md-12 mt-3"><h5 class="font-weight-bold">Are you sure?</h5><p class="text-muted"> This action cannot be undone. All values associated with this field will be lost. </p></div>',2)),s("div",Et,[s("button",{type:"button",class:"btn btn-danger w-100",onClick:t[8]||(t[8]=(...o)=>e.performDelete&&e.performDelete(...o))}," Delete Field "),t[32]||(t[32]=s("button",{type:"button",class:"btn btn-secondary w-100 mt-2","data-bs-dismiss":"modal"}," Cancel ",-1))])])])])])])])])])])])],64)}const Ht=q(j,[["render",Vt]]);export{Ht as default};
