import{S as O}from"./SideBar-Ce49zaSC.js";import{r as F,u as P}from"./index-DDjTWfF1.js";import{c as p,a as n,b as e,r as C,d as I,w as d,k as L,l as S,f as M,e as i,v as x,n as V,A as H,F as K,j,h as r,o as R,B as $,i as v,t as D}from"./index-B_FBt44k.js";import{a as y}from"./index-D8rVyQy1.js";import{d as G}from"./vuedraggable.umd-D5KFg2wK.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={components:{SideBar:O,draggable:G},setup(){const m=localStorage.getItem("token"),t=j.useToast(),b=r({title:"",level:""}),l=r(null),k=r({title:"",level:""}),f=r([]),c=r({id:null,title:""}),a=async()=>{try{const o=await y.get("http://127.0.0.1:8000/api/skills",{headers:{Authorization:`Bearer ${m}`}});o.status===200&&(f.value=Array.isArray(o.data.data)?o.data.data:[o.data.data])}catch{t.error("Error loading skills.")}};R(()=>{document.getElementById("my-resume").classList.add("nav-active"),a()});const _=$(()=>({title:{required:F},level:{required:F}})),s=P(_,b),h=async()=>{if(await s.value.$validate())try{(await y.post("http://127.0.0.1:8000/api/skills",b.value,{headers:{Authorization:`Bearer ${m}`}})).status===201&&(t.success("Skill information added!"),a(),T())}catch{t.error("Failed to save skill.")}},T=()=>{b.value={title:"",level:""},s.value.$reset()},z=o=>{c.value={id:o.id,title:o.title},window.bootstrap.Modal.getOrCreateInstance(document.getElementById("deleteModal")).show()},N=async()=>{if(c.value.id)try{await y.delete(`http://127.0.0.1:8000/api/skills/${c.value.id}`,{headers:{Authorization:`Bearer ${m}`}}),t.success("Skill information deleted!"),a()}catch{t.error("Error deleting skill.")}finally{window.bootstrap.Modal.getInstance(document.getElementById("deleteModal")).hide()}},U=o=>{k.value={...o},l.value=o.id,window.bootstrap.Modal.getOrCreateInstance(document.getElementById("editSkillModal")).show()},q=async()=>{if(l.value!==null)try{(await y.put(`http://127.0.0.1:8000/api/skills/${l.value}`,k.value,{headers:{Authorization:`Bearer ${m}`}})).status===200&&(t.success("Skill information updated!"),a(),window.bootstrap.Modal.getInstance(document.getElementById("editSkillModal")).hide())}catch{t.error("Error updating skill.")}},B=r(""),u=r("asc");return{form:b,v$:s,submitForm:h,skills:f,confirmDelete:z,performDelete:N,editSkill:U,editForm:k,updateSkill:q,sortKey:B,sortOrder:u,sortBy:o=>{B.value===o?u.value=u.value==="asc"?"desc":"asc":(B.value=o,u.value="asc"),f.value.sort((g,E)=>{const w=(g[o]||"").toString().toLowerCase(),A=(E[o]||"").toString().toLowerCase();return w<A?u.value==="asc"?-1:1:w>A?u.value==="asc"?1:-1:0})},onSortEnd:async()=>{try{const o=f.value.map((E,w)=>({...E,sort_order:w+1}));(await y.post("http://127.0.0.1:8000/api/update/skill/order",{skills:o},{headers:{Authorization:`Bearer ${m}`}})).status===200&&t.success("Sort order updated!")}catch{t.error("Sort update failed.")}},deleteTarget:c}}},W={id:"main",class:"main"},X={class:"dashboard"},Y={class:"row"},Z={class:"col-md-12"},tt={class:"nav nav-tabs nav-tabs-bordered d-flex"},et={class:"nav-item tab-style"},lt={class:"nav-item tab-style"},st={class:"nav-item tab-style"},ot={class:"nav-item"},at={class:"nav-item tab-style"},it={class:"nav-item tab-style"},nt={class:"nav-item tab-style"},dt={class:"nav-item tab-style"},rt={class:"nav-item tab-style"},mt={class:"tab-content"},ct={class:"col-md-6"},ut={key:0,class:"error-msg"},vt={class:"col-md-6"},bt={key:0,class:"error-msg"},ft={class:"col-md-12 mt-4"},pt={class:"table table-bordered table-sm"},yt=["onClick"],kt=["onClick"],gt={key:1},wt={class:"modal fade",id:"editSkillModal",tabindex:"-1","aria-labelledby":"editSkillModalLabel","aria-hidden":"true"},St={class:"modal-dialog"},xt={class:"modal-content"},_t={class:"modal-body row g-3"},ht={class:"col-md-12"},Bt={class:"col-md-12"},Et={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"confirmDeleteLabel","aria-hidden":"true"},Ct={class:"modal-dialog",style:{"max-width":"400px"}},Mt={class:"modal-content"},Vt={class:"modal-body"},At={class:"row mt-3"},Ft={class:"col-md-12 text-center"};function It(m,t,b,l,k,f){const c=C("SideBar"),a=C("router-link"),_=C("draggable");return v(),p(K,null,[n(c),e("main",W,[t[33]||(t[33]=I('<div class="pagetitle"><ol class="breadcrumb"><li class="breadcrumb-item active">Home</li><li class="breadcrumb-item"><a href="">My Resume</a></li></ol></div>',1)),e("section",X,[e("div",Y,[e("div",Z,[e("ul",tt,[e("li",et,[n(a,{to:"/resume/profile",class:"nav-link font-weight-bold"},{default:d(()=>t[9]||(t[9]=[i("Personal")])),_:1})]),e("li",lt,[n(a,{to:"/resume/experiences",class:"nav-link font-weight-bold"},{default:d(()=>t[10]||(t[10]=[i("Experience")])),_:1})]),e("li",st,[n(a,{to:"/resume/educations",class:"nav-link font-weight-bold"},{default:d(()=>t[11]||(t[11]=[i("Education")])),_:1})]),e("li",ot,[n(a,{to:"/resume/skills",class:"nav-link active font-weight-bold"},{default:d(()=>t[12]||(t[12]=[i("Skills")])),_:1})]),e("li",at,[n(a,{to:"/resume/interests",class:"nav-link font-weight-bold"},{default:d(()=>t[13]||(t[13]=[i("Interest")])),_:1})]),e("li",it,[n(a,{to:"/resume/publications",class:"nav-link font-weight-bold"},{default:d(()=>t[14]||(t[14]=[i("Publications")])),_:1})]),e("li",nt,[n(a,{to:"/resume/languages",class:"nav-link font-weight-bold"},{default:d(()=>t[15]||(t[15]=[i("Language")])),_:1})]),e("li",dt,[n(a,{to:"/resume/certifications",class:"nav-link font-weight-bold"},{default:d(()=>t[16]||(t[16]=[i("Certifications")])),_:1})]),e("li",rt,[n(a,{to:"/resume/awards",class:"nav-link font-weight-bold"},{default:d(()=>t[17]||(t[17]=[i("Awards & Honors")])),_:1})])]),e("div",mt,[e("form",{onSubmit:t[2]||(t[2]=L((...s)=>l.submitForm&&l.submitForm(...s),["prevent"])),class:"row g-3"},[e("div",ct,[t[18]||(t[18]=e("label",{class:"form-label"},[i("Title "),e("span",{class:"required-mask"},"*")],-1)),S(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.form.title=s),type:"text",class:V(["form-control",{"is-invalid":l.v$.title.$dirty&&l.v$.title.$error}])},null,2),[[x,l.form.title]]),l.v$.title.$dirty&&l.v$.title.$error?(v(),p("div",ut," Title required. ")):M("",!0)]),e("div",vt,[t[19]||(t[19]=e("label",{class:"form-label"},[i("Level (Out of 10)"),e("span",{class:"required-mask"},"*")],-1)),S(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.form.level=s),type:"number",max:"10",min:"1",class:V(["form-control",{"is-invalid":l.v$.level.$dirty&&l.v$.level.$error}])},null,2),[[x,l.form.level]]),l.v$.level.$dirty&&l.v$.level.$error?(v(),p("span",bt," Level required. ")):M("",!0)]),t[20]||(t[20]=e("div",{class:"col-md-12"},[e("button",{type:"submit",class:"btn btn-primary"},"Submit")],-1))],32),e("div",ft,[e("table",pt,[e("thead",null,[e("tr",null,[e("th",{onClick:t[3]||(t[3]=s=>l.sortBy("title")),style:{cursor:"pointer"}},[t[21]||(t[21]=i(" Title ")),l.sortKey==="title"?(v(),p("i",{key:0,class:V(l.sortOrder==="asc"?"bi bi-arrow-up":"bi bi-arrow-down")},null,2)):M("",!0)]),t[22]||(t[22]=e("th",null,"Level",-1)),t[23]||(t[23]=e("th",null,"Actions",-1))])]),l.skills&&l.skills.length>0?(v(),H(_,{key:0,modelValue:l.skills,"onUpdate:modelValue":t[4]||(t[4]=s=>l.skills=s),tag:"tbody","item-key":"id",onEnd:l.onSortEnd},{item:d(({element:s})=>[e("tr",null,[e("td",null,D(s.title),1),e("td",null,D(s.level),1),e("td",null,[e("a",{href:"#",onClick:h=>l.editSkill(s),class:"text-primary"},t[24]||(t[24]=[e("i",{class:"bi bi-pencil"},null,-1),i(" Edit ")]),8,yt),e("a",{href:"#",onClick:h=>l.confirmDelete(s),class:"text-danger"},t[25]||(t[25]=[e("i",{class:"bi bi-trash"},null,-1),i(" Delete ")]),8,kt)])])]),_:1},8,["modelValue","onEnd"])):(v(),p("tbody",gt,t[26]||(t[26]=[e("tr",null,[e("td",{colspan:"3",class:"maroon"},"No records")],-1)])))])]),e("div",wt,[e("div",St,[e("div",xt,[e("form",{onSubmit:t[7]||(t[7]=L((...s)=>l.updateSkill&&l.updateSkill(...s),["prevent"]))},[t[29]||(t[29]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"editSkillModalLabel"},"Edit Skill"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",_t,[e("div",ht,[t[27]||(t[27]=e("label",{class:"form-label"},"Skill Title",-1)),S(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.editForm.title=s),type:"text",class:"form-control"},null,512),[[x,l.editForm.title]])]),e("div",Bt,[t[28]||(t[28]=e("label",{class:"form-label"},"Skill Level",-1)),S(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.editForm.level=s),type:"text",class:"form-control"},null,512),[[x,l.editForm.level]])])]),t[30]||(t[30]=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel "),e("button",{type:"submit",class:"btn btn-primary"},"Update")],-1))],32)])])]),e("div",Et,[e("div",Ct,[e("div",Mt,[e("div",Vt,[e("div",At,[t[31]||(t[31]=I('<div class="col-md-12 text-center circle"><i class="bi bi-exclamation-triangle-fill text-danger" style="border-radius:50%;padding:4px;background-color:#facdcd;"></i></div><div class="col-md-12 text-center mt-3"><h5 class="font-weight-bold">Are you sure?</h5></div><div class="col-md-12 text-center text-muted"><p> This action cannot be undone. All values associated this field will be lost </p></div>',3)),e("div",Ft,[e("button",{type:"button",class:"btn btn-danger w-100",onClick:t[8]||(t[8]=(...s)=>l.performDelete&&l.performDelete(...s))}," Delete Field ")]),t[32]||(t[32]=e("div",{class:"col-md-12 text-center mt-2"},[e("button",{type:"button",class:"btn btn-secondary w-100","data-bs-dismiss":"modal"}," Cancel ")],-1))])])])])])])])])])])],64)}const Pt=J(Q,[["render",It]]);export{Pt as default};
