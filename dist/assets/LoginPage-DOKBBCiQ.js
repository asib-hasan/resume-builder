import{c as l,b as s,w as g,f as i,y as w,e as m,v as u,i as f,B as y,o as n}from"./index-CIbV6caW.js";import{a as b}from"./index-D8rVyQy1.js";import{_ as x,u as h,r as p,e as k}from"./index-BYVp4fHy.js";const M={setup(){const d=y(),e=f({email:"",password:""}),o=h({email:{required:p,email:k},password:{required:p}},e),r=f(null);return{form:e,v$:o,submitForm:async()=>{var t,c;if(o.value.$validate(),!o.value.$error)try{const a=await b.post("http://127.0.0.1:8000/api/login",{email:e.value.email,password:e.value.password});localStorage.setItem("token",a.data.token),r.value=null,d.push("/dashboard")}catch(a){alert(a),r.value=((c=(t=a.response)==null?void 0:t.data)==null?void 0:c.error)||"Login failed"}},errorMessage:r}}},I={class:"container"},P={class:"min-vh-50 d-flex flex-column align-items-center justify-content-center py-4"},V={class:"container"},j={class:"row justify-content-center"},B={class:"col-lg-4 col-md-6 d-flex flex-column align-items-center justify-content-center"},E={class:"card mb-3"},F={class:"card-body"},N={key:0,class:"alert alert-danger"},S={class:"col-12"},D={class:"form-floating"},U={key:0,class:"text-danger"},q={class:"col-12"},L={class:"form-floating"},C={key:0,class:"text-danger"};function G(d,e,v,o,r,_){return n(),l("main",null,[s("div",I,[s("section",P,[s("div",V,[s("div",j,[s("div",B,[s("div",E,[s("div",F,[e[6]||(e[6]=s("div",{class:"mt-4 mb-4"},[s("div",{class:"d-flex justify-content-center"},[s("a",{href:"",class:"logo d-flex align-items-center w-auto"},[s("span",null,"My Profile")])])],-1)),s("form",{class:"row g-3",onSubmit:e[2]||(e[2]=g((...t)=>o.submitForm&&o.submitForm(...t),["prevent"]))},[o.errorMessage?(n(),l("div",N,w(o.errorMessage),1)):i("",!0),s("div",S,[s("div",D,[m(s("input",{type:"email",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=t=>o.form.email=t),placeholder:"Enter User ID"},null,512),[[u,o.form.email]]),e[3]||(e[3]=s("label",{for:"email"},"Email",-1)),o.v$.email.$error?(n(),l("small",U,"Invalid email")):i("",!0)])]),s("div",q,[s("div",L,[m(s("input",{type:"password",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=t=>o.form.password=t),placeholder:"Enter Password"},null,512),[[u,o.form.password]]),e[4]||(e[4]=s("label",{for:"password"},"Password",-1)),o.v$.password.$error?(n(),l("small",C,"Password is required")):i("",!0)])]),e[5]||(e[5]=s("div",{class:"col-12"},[s("button",{class:"btn btn-primary w-100",type:"submit"},"SIGN IN")],-1))],32)])])])])])])])])}const z=x(M,[["render",G]]);export{z as default};
