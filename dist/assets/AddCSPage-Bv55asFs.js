import{h as C,j as $,o as V,c as i,a as v,b as s,d as S,w,r as x,k as q,l as y,f as m,e as d,v as f,n as g,u as o,F as h,i as n}from"./index-B_FBt44k.js";import{S as D}from"./SideBar-Ce49zaSC.js";import{C as F}from"./CustomEditor-CGAOM7K0.js";import{a as B}from"./index-D8rVyQy1.js";import{u as T,r as p}from"./index-DDjTWfF1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const N={id:"main",class:"main"},E={class:"dashboard"},U={class:"row"},I={class:"col-md-12"},M={class:"nav nav-tabs nav-tabs-bordered d-flex"},z={class:"nav-item tab-style"},A={class:"tab-content"},L={class:"col-md-6"},P={key:0,class:"error-msg"},j={class:"col-md-6"},H={key:0,class:"error-msg"},G={class:"col-md-6"},J={key:0,class:"error-msg"},K={class:"col-md-6"},O={class:"col-md-12"},Q={class:"border rounded"},R={key:0,class:"error-msg mt-1"},oe={__name:"AddCSPage",setup(W){const t=C({title:"",category:"",date:"",image:null,description:""}),a=T({title:{required:p},category:{required:p},date:{required:p},description:{required:p}},t),c=$.useToast(),b=localStorage.getItem("token"),_=r=>{t.value.image=r.target.files[0]},k=async()=>{if(a.value.$validate(),!a.value.$error){const r=new FormData;r.append("title",t.value.title),r.append("category",t.value.category),r.append("date",t.value.date),r.append("description",t.value.description),t.value.image&&r.append("image",t.value.image);try{(await B.post("http://127.0.0.1:8000/api/cs",r,{headers:{Authorization:`Bearer ${b}`,"Content-Type":"multipart/form-data"}})).status==201?(c.success("Case Study posted successfully!"),t.value={title:"",category:"",date:"",image:null,description:""},a.value.$reset()):c.error("Failed to post case study.")}catch(e){if(console.error(e),e.response&&e.response.status===422){const u=e.response.data.errors;for(const l in u)c.error(u[l][0])}else c.error("Server error occurred."),console.error(e)}}};return V(()=>{document.getElementById("case-study").classList.add("nav-active")}),(r,e)=>{const u=x("router-link");return n(),i(h,null,[v(D),s("main",N,[e[12]||(e[12]=S('<div class="pagetitle"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="#">Home</a></li><li class="breadcrumb-item active">Case Study</li></ol></div>',1)),s("section",E,[s("div",U,[s("div",I,[s("ul",M,[e[5]||(e[5]=s("li",{class:"nav-item"},[s("a",{href:"#",class:"nav-link active font-weight-bold"},"Create Case Study")],-1)),s("li",z,[v(u,{to:"/case/study/list",class:"nav-link font-weight-bold"},{default:w(()=>e[4]||(e[4]=[d("List")])),_:1})])]),s("div",A,[s("form",{onSubmit:q(k,["prevent"]),class:"row g-3"},[s("div",L,[e[6]||(e[6]=s("label",{class:"form-label"},[d("Title "),s("span",{class:"required-mask"},"*")],-1)),y(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.title=l),type:"text",class:g(["form-control",{"is-invalid":o(a).title.$dirty&&o(a).title.$error}])},null,2),[[f,t.value.title]]),o(a).title.$error?(n(),i("div",P,"Title required")):m("",!0)]),s("div",j,[e[7]||(e[7]=s("label",{class:"form-label"},[d("Category "),s("span",{class:"required-mask"},"*")],-1)),y(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.category=l),type:"text",class:g(["form-control",{"is-invalid":o(a).category.$dirty&&o(a).category.$error}])},null,2),[[f,t.value.category]]),o(a).category.$error?(n(),i("div",H,"Category required")):m("",!0)]),s("div",G,[e[8]||(e[8]=s("label",{class:"form-label"},[d("Date "),s("span",{class:"required-mask"},"*")],-1)),y(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.date=l),type:"date",class:g(["form-control",{"is-invalid":o(a).date.$dirty&&o(a).date.$error}])},null,2),[[f,t.value.date]]),o(a).date.$error?(n(),i("span",J,"Date required")):m("",!0)]),s("div",K,[e[9]||(e[9]=s("label",{class:"form-label"},"Image",-1)),s("input",{type:"file",onChange:_,class:"form-control"},null,32)]),s("div",O,[e[10]||(e[10]=s("label",{class:"form-label"},[d("Description "),s("span",{class:"required-mask"},"*")],-1)),s("div",Q,[v(F,{modelValue:t.value.description,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.description=l)},null,8,["modelValue"])]),o(a).description.$error?(n(),i("div",R,"Description required")):m("",!0)]),e[11]||(e[11]=s("div",{class:"col-md-2"},[s("label",{class:"form-label"},"Â "),s("button",{type:"submit",class:"btn btn-primary"},"Post Case Study")],-1))],32)])])])])])],64)}}};export{oe as default};
