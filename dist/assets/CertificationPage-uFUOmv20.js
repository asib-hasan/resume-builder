import{S as T}from"./SideBar-CoVQvkwt.js";import{_ as A,r as E,u as q}from"./index-BYVp4fHy.js";import{c as h,a as d,b as e,r as k,d as F,p as r,w,e as M,f as x,g as o,v as I,t as B,s as U,F as z,n as L,i as b,x as N,l as P,o as v,y as $}from"./index-CIbV6caW.js";import{a as C}from"./index-D8rVyQy1.js";import{d as O}from"./vuedraggable.umd-A9et21qD.js";const S="http://127.0.0.1:8000/storage",R={components:{SideBar:T,draggable:O},setup(){const m=localStorage.getItem("token"),t=L.useToast(),c=b({title:"",image:null}),a=b({title:"",image:null}),g=b(null),_=b([]),p=b({id:null,title:""}),l=N(()=>({title:{required:E},image:{required:E}})),u=q(l,c),i=async()=>{try{const s=await C.get("http://127.0.0.1:8000/api/certifications",{headers:{Authorization:`Bearer ${m}`}});_.value=Array.isArray(s.data.data)?s.data.data:[s.data.data]}catch{t.error("Error loading certifications.")}},f=b("");function D(s){f.value=`${S}/${s.image}`,console.log(f.value),window.bootstrap.Modal.getOrCreateInstance(document.getElementById("viewCertificateModal")).show()}return P(i),{form:c,v$:u,submitForm:async()=>{if(!await u.value.$validate())return;const n=new FormData;n.append("title",c.value.title),c.value.image&&n.append("image",c.value.image);try{(await C.post("http://127.0.0.1:8000/api/certifications",n,{headers:{Authorization:`Bearer ${m}`,"Content-Type":"multipart/form-data"}})).status===201&&(t.success("Certification added!"),i(),c.value={title:"",image:null},u.value.$reset())}catch{t.error("Error adding certification.")}},certifications:_,editForm:a,editingId:g,editCertification:s=>{a.value={title:s.title,image:s.image},g.value=s.id,window.bootstrap.Modal.getOrCreateInstance(document.getElementById("editModal")).show()},updateCertification:async()=>{if(!g.value)return;const s=new FormData;s.append("title",a.value.title),a.value.image&&s.append("image",a.value.image),s.append("_method","PUT");try{(await C.post(`http://127.0.0.1:8000/api/certifications/${g.value}`,s,{headers:{Authorization:`Bearer ${m}`,"Content-Type":"multipart/form-data"}})).status===200&&(t.success("Certification updated!"),i(),window.bootstrap.Modal.getInstance(document.getElementById("editModal")).hide())}catch(n){if(n.response&&n.response.status===422){const y=n.response.data.errors;for(const V in y)t.error(y[V][0])}else t.error("Server error occurred."),console.error(n)}},confirmDelete:s=>{p.value={id:s.id,title:s.title},window.bootstrap.Modal.getOrCreateInstance(document.getElementById("deleteModal")).show()},performDelete:async()=>{try{await C.delete(`http://127.0.0.1:8000/api/certifications/${p.value.id}`,{headers:{Authorization:`Bearer ${m}`}}),t.success("Certification deleted!"),i()}catch{t.error("Delete failed.")}finally{window.bootstrap.Modal.getInstance(document.getElementById("deleteModal")).hide()}},deleteTarget:p,onSortEnd:async()=>{try{const s=_.value.map((n,y)=>({...n,sort_order:y+1}));await C.post("http://127.0.0.1:8000/api/update/certification/order",{certifications:s},{headers:{Authorization:`Bearer ${m}`}}),t.success("Sort order updated!")}catch{t.error("Sort order update failed.")}},handleFileChange:s=>{c.value.image=s.target.files[0],u.value.image.$touch()},handleEditFileChange:s=>{a.value.image=s.target.files[0]},baseImageURL:S,viewCertificate:D,selectedImage:f}}},H={id:"main",class:"main"},j={class:"dashboard"},G={class:"row"},J={class:"col-md-12"},K={class:"nav nav-tabs nav-tabs-bordered d-flex"},Q={class:"nav-item tab-style"},W={class:"nav-item tab-style"},X={class:"nav-item tab-style"},Y={class:"nav-item tab-style"},Z={class:"nav-item tab-style"},tt={class:"nav-item tab-style"},et={class:"nav-item tab-style"},at={class:"nav-item"},it={class:"nav-item tab-style"},st={class:"tab-content"},ot={class:"col-md-6"},lt={key:0,class:"error-msg"},nt={class:"col-md-6"},dt={key:0,class:"error-msg"},rt={class:"table-responsive mt-4"},ct={class:"table table-bordered table-sm"},mt=["onClick"],ut=["onClick"],ft=["onClick"],bt={key:1},vt={class:"modal fade",id:"viewCertificateModal",tabindex:"-1","aria-labelledby":"viewCertificateModalLabel","aria-hidden":"true"},gt={class:"modal-dialog modal-dialog-centered"},pt={class:"modal-content"},yt={class:"modal-body text-center"},ht=["src"],wt={class:"modal fade",id:"editModal",tabindex:"-1","aria-labelledby":"editModalLabel","aria-hidden":"true"},Ct={class:"modal-dialog"},_t={class:"modal-content"},kt={class:"modal-body row g-3"},xt={class:"col-md-12"},Et={class:"col-md-12"},Ft={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-hidden":"true"},Mt={class:"modal-dialog",style:{"max-width":"400px"}},It={class:"modal-content"},Bt={class:"modal-body"},St={class:"row mt-3 text-center"},Dt={class:"col-md-12"};function Vt(m,t,c,a,g,_){const p=k("SideBar"),l=k("router-link"),u=k("draggable");return v(),h(z,null,[d(p),e("main",H,[t[32]||(t[32]=F('<div class="pagetitle"><ol class="breadcrumb"><li class="breadcrumb-item active">Home</li><li class="breadcrumb-item"><a href="">My Resume</a></li></ol></div>',1)),e("section",j,[e("div",G,[e("div",J,[e("ul",K,[e("li",Q,[d(l,{to:"/resume/profile",class:"nav-link font-weight-bold"},{default:r(()=>t[8]||(t[8]=[o("Personal")])),_:1})]),e("li",W,[d(l,{to:"/resume/experiences",class:"nav-link font-weight-bold"},{default:r(()=>t[9]||(t[9]=[o("Experience")])),_:1})]),e("li",X,[d(l,{to:"/resume/educations",class:"nav-link font-weight-bold"},{default:r(()=>t[10]||(t[10]=[o("Education")])),_:1})]),e("li",Y,[d(l,{to:"/resume/skills",class:"nav-link font-weight-bold"},{default:r(()=>t[11]||(t[11]=[o("Skills")])),_:1})]),e("li",Z,[d(l,{to:"/resume/interests",class:"nav-link font-weight-bold"},{default:r(()=>t[12]||(t[12]=[o("Interest")])),_:1})]),e("li",tt,[d(l,{to:"/resume/publications",class:"nav-link font-weight-bold"},{default:r(()=>t[13]||(t[13]=[o("Publications")])),_:1})]),e("li",et,[d(l,{to:"/resume/languages",class:"nav-link font-weight-bold"},{default:r(()=>t[14]||(t[14]=[o("Language")])),_:1})]),e("li",at,[d(l,{to:"/resume/certifications",class:"nav-link active font-weight-bold"},{default:r(()=>t[15]||(t[15]=[o("Certifications")])),_:1})]),e("li",it,[d(l,{to:"/resume/awards",class:"nav-link font-weight-bold"},{default:r(()=>t[16]||(t[16]=[o("Awards & Honors")])),_:1})])]),e("div",st,[e("form",{onSubmit:t[2]||(t[2]=w((...i)=>a.submitForm&&a.submitForm(...i),["prevent"])),class:"row g-3"},[e("div",ot,[t[17]||(t[17]=e("label",{class:"form-label"},[o("Certification Title "),e("span",{class:"required-mask"},"*")],-1)),M(e("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>a.form.title=i),type:"text",class:B(["form-control",{"is-invalid":a.v$.title.$dirty&&a.v$.title.$error}])},null,2),[[I,a.form.title]]),a.v$.title.$dirty&&a.v$.title.$error?(v(),h("span",lt," Title required. ")):x("",!0)]),e("div",nt,[t[18]||(t[18]=e("label",{class:"form-label"},[o(" Upload Certificate "),e("span",{class:"required-mask"},"*")],-1)),e("input",{type:"file",class:B(["form-control",{"is-invalid":a.v$.image.$dirty&&a.v$.image.$error}]),onChange:t[1]||(t[1]=(...i)=>a.handleFileChange&&a.handleFileChange(...i))},null,34),a.v$.image.$dirty&&a.v$.image.$error?(v(),h("span",dt," Certificate image required. ")):x("",!0)]),t[19]||(t[19]=e("div",{class:"col-md-2"},[e("button",{type:"submit",class:"btn btn-primary"},"Submit")],-1))],32),e("div",rt,[e("table",ct,[t[24]||(t[24]=e("thead",null,[e("tr",null,[e("th",{class:"table-th-width-70"},"Title"),e("th",{class:"table-th-width-30"},"Actions")])],-1)),a.certifications&&a.certifications.length>0?(v(),U(u,{key:0,modelValue:a.certifications,"onUpdate:modelValue":t[3]||(t[3]=i=>a.certifications=i),tag:"tbody","item-key":"id",onEnd:a.onSortEnd},{item:r(({element:i})=>[e("tr",null,[e("td",null,$(i.title),1),e("td",null,[e("a",{href:"#",onClick:w(f=>a.viewCertificate(i),["prevent"]),class:"text-secondary"},t[20]||(t[20]=[e("i",{class:"bi bi-eye"},null,-1),o(" Preview ")]),8,mt),e("a",{href:"#",onClick:w(f=>a.editCertification(i),["prevent"]),class:"text-primary"},t[21]||(t[21]=[e("i",{class:"bi bi-pencil"},null,-1),o(" Edit ")]),8,ut),e("a",{href:"#",onClick:w(f=>a.confirmDelete(i),["prevent"]),class:"text-danger"},t[22]||(t[22]=[e("i",{class:"bi bi-trash"},null,-1),o(" Delete ")]),8,ft)])])]),_:1},8,["modelValue","onEnd"])):(v(),h("tbody",bt,t[23]||(t[23]=[e("tr",null,[e("td",{colspan:"3",class:"maroon"},"No records")],-1)])))])]),e("div",vt,[e("div",gt,[e("div",pt,[t[25]||(t[25]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"viewCertificateModalLabel"},"Certificate Preview"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",yt,[a.selectedImage?(v(),h("img",{key:0,src:a.selectedImage,alt:"Full Certificate",class:"img-fluid"},null,8,ht)):x("",!0)])])])]),e("div",wt,[e("div",Ct,[e("div",_t,[e("form",{onSubmit:t[6]||(t[6]=w((...i)=>a.updateCertification&&a.updateCertification(...i),["prevent"]))},[t[28]||(t[28]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"editModalLabel"},"Edit Certification"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),e("div",kt,[e("div",xt,[t[26]||(t[26]=e("label",{class:"form-label"},[o("Title "),e("span",{class:"required-mask"},"*")],-1)),M(e("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>a.editForm.title=i),type:"text",class:"form-control"},null,512),[[I,a.editForm.title]])]),e("div",Et,[t[27]||(t[27]=e("label",{class:"form-label"},[o("Replace Image "),e("span",{class:"required-mask"},"*")],-1)),e("input",{type:"file",class:"form-control",onChange:t[5]||(t[5]=(...i)=>a.handleEditFileChange&&a.handleEditFileChange(...i))},null,32)])]),t[29]||(t[29]=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel "),e("button",{type:"submit",class:"btn btn-primary"},"Update")],-1))],32)])])]),e("div",Ft,[e("div",Mt,[e("div",It,[e("div",Bt,[e("div",St,[t[31]||(t[31]=F('<div class="col-md-12 circle"><i class="bi bi-exclamation-triangle-fill text-danger" style="background-color:#facdcd;padding:4px;border-radius:50%;"></i></div><div class="col-md-12 mt-3"><h5 class="font-weight-bold">Are you sure?</h5><p class="text-muted"> This action cannot be undone. All values associated with this field will be lost. </p></div>',2)),e("div",Dt,[e("button",{type:"button",class:"btn btn-danger w-100",onClick:t[7]||(t[7]=(...i)=>a.performDelete&&a.performDelete(...i))}," Delete Field "),t[30]||(t[30]=e("button",{type:"button",class:"btn btn-secondary w-100 mt-2","data-bs-dismiss":"modal"}," Cancel ",-1))])])])])])])])])])])])],64)}const Gt=A(R,[["render",Vt]]);export{Gt as default};
