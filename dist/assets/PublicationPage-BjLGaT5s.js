import{S}from"./SideBar-CoVQvkwt.js";import{_ as F,r as D,a as I,u as A}from"./index-BYVp4fHy.js";import{c as m,a as d,b as t,r as M,d as B,p as n,w as g,e as u,f as V,g as o,v,t as C,s as L,y as k,F as U,n as q,i as y,x as z,l as N,o as r}from"./index-CIbV6caW.js";import{a as w}from"./index-D8rVyQy1.js";import{d as T}from"./vuedraggable.umd-A9et21qD.js";const O={components:{SideBar:S,draggable:T},setup(){const b=localStorage.getItem("token"),e=q.useToast(),f=y({details:"",link:"",year:""}),s=y({details:"",link:"",year:""}),p=y(null),h=y([]),_=y(""),i=y({id:null,details:""}),x=z(()=>({details:{required:D},link:{required:D,url:I},year:{required:D}})),a=A(x,f),c=async()=>{try{const l=await w.get("http://127.0.0.1:8000/api/publications",{headers:{Authorization:`Bearer ${b}`}});h.value=Array.isArray(l.data.data)?l.data.data:[l.data.data]}catch{e.error("Error loading publications.")}};return N(c),{form:f,v$:a,submitForm:async()=>{if(await a.value.$validate())try{(await w.post("http://127.0.0.1:8000/api/publications",f.value,{headers:{Authorization:`Bearer ${b}`}})).status===201&&(e.success("Publication added!"),c(),f.value={details:"",link:"",year:""},a.value.$reset())}catch{e.error("Error adding publication.")}},publications:h,editForm:s,editingId:p,editPublication:l=>{s.value={details:l.details,link:l.link,year:l.year},p.value=l.id,window.bootstrap.Modal.getOrCreateInstance(document.getElementById("editModal")).show()},updatePublication:async()=>{if(p.value)try{(await w.put(`http://127.0.0.1:8000/api/publications/${p.value}`,s.value,{headers:{Authorization:`Bearer ${b}`}})).status===200&&(e.success("Publication updated!"),c(),window.bootstrap.Modal.getInstance(document.getElementById("editModal")).hide())}catch{e.error("Update failed.")}},confirmDelete:l=>{i.value={id:l.id,details:l.details},window.bootstrap.Modal.getOrCreateInstance(document.getElementById("deleteModal")).show()},performDelete:async()=>{try{await w.delete(`http://127.0.0.1:8000/api/publications/${i.value.id}`,{headers:{Authorization:`Bearer ${b}`}}),e.success("Publication deleted!"),c()}catch{e.error("Delete failed.")}finally{window.bootstrap.Modal.getInstance(document.getElementById("deleteModal")).hide()}},deleteTarget:i,onSortEnd:async()=>{try{const l=h.value.map((E,P)=>({...E,sort_order:P+1}));await w.post("http://127.0.0.1:8000/api/update/publication/order",{publications:l},{headers:{Authorization:`Bearer ${b}`}}),e.success("Order updated!")}catch{e.error("Sort order update failed.")}},showDetails:l=>{_.value=l.details,window.bootstrap.Modal.getOrCreateInstance(document.getElementById("viewDetailsModal")).show()},selectedDetails:_}}},Y={id:"main",class:"main"},$={class:"dashboard"},H={class:"row"},R={class:"col-md-12"},j={class:"nav nav-tabs nav-tabs-bordered d-flex"},G={class:"nav-item tab-style"},J={class:"nav-item tab-style"},K={class:"nav-item tab-style"},Q={class:"nav-item tab-style"},W={class:"nav-item tab-style"},X={class:"nav-item"},Z={class:"nav-item tab-style"},tt={class:"tab-content"},et={class:"col-md-12"},st={key:0,class:"error-msg"},at={class:"col-md-6"},lt={key:0,class:"error-msg"},ot={class:"col-md-6"},it={key:0,class:"error-msg"},dt={class:"table-responsive mt-4"},nt={class:"table table-bordered table-sm"},rt={key:0},ct={key:1},mt=["onClick"],bt=["href"],ut=["onClick"],vt=["onClick"],yt={key:1},ft={class:"modal fade",id:"viewDetailsModal",tabindex:"-1","aria-labelledby":"viewDetailsModalLabel","aria-hidden":"true"},pt={class:"modal-dialog modal-md"},gt={class:"modal-content"},kt={class:"modal-body"},wt={class:"modal fade",id:"editModal",tabindex:"-1","aria-labelledby":"editModalLabel","aria-hidden":"true"},ht={class:"modal-dialog"},_t={class:"modal-content"},xt={class:"modal-body row g-3"},Dt={class:"col-md-12"},Mt={class:"col-md-12"},Vt={class:"col-md-12"},Ct={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"confirmDeleteLabel","aria-hidden":"true"},Et={class:"modal-dialog",style:{"max-width":"400px"}},Bt={class:"modal-content"},Pt={class:"modal-body"},St={class:"row mt-3"},Ft={class:"col-md-12 text-center"};function It(b,e,f,s,p,h){const _=M("SideBar"),i=M("router-link"),x=M("draggable");return r(),m(U,null,[d(_),t("main",Y,[e[34]||(e[34]=B('<div class="pagetitle"><ol class="breadcrumb"><li class="breadcrumb-item active">Home</li><li class="breadcrumb-item"><a href="">My Resume</a></li></ol></div>',1)),t("section",$,[t("div",H,[t("div",R,[t("ul",j,[t("li",G,[d(i,{to:"/resume/profile",class:"nav-link font-weight-bold"},{default:n(()=>e[10]||(e[10]=[o("Personal")])),_:1})]),t("li",J,[d(i,{to:"/resume/experiences",class:"nav-link font-weight-bold"},{default:n(()=>e[11]||(e[11]=[o("Experience")])),_:1})]),t("li",K,[d(i,{to:"/resume/educations",class:"nav-link font-weight-bold"},{default:n(()=>e[12]||(e[12]=[o("Education")])),_:1})]),t("li",Q,[d(i,{to:"/resume/skills",class:"nav-link font-weight-bold"},{default:n(()=>e[13]||(e[13]=[o("Skills")])),_:1})]),t("li",W,[d(i,{to:"/resume/interests",class:"nav-link font-weight-bold"},{default:n(()=>e[14]||(e[14]=[o("Interest")])),_:1})]),t("li",X,[d(i,{to:"/resume/publications",class:"nav-link active font-weight-bold"},{default:n(()=>e[15]||(e[15]=[o("Publications")])),_:1})]),t("li",Z,[d(i,{to:"/resume/languages",class:"nav-link font-weight-bold"},{default:n(()=>e[16]||(e[16]=[o("Language")])),_:1})])]),t("div",tt,[t("form",{onSubmit:e[3]||(e[3]=g((...a)=>s.submitForm&&s.submitForm(...a),["prevent"])),class:"row g-3"},[t("div",et,[e[17]||(e[17]=t("label",{class:"form-label"},[o("Details "),t("span",{class:"required-mask"},"*")],-1)),u(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.form.details=a),class:C(["form-control",{"is-invalid":s.v$.details.$dirty&&s.v$.details.$error}]),rows:"3"},null,2),[[v,s.form.details]]),s.v$.details.$dirty&&s.v$.details.$error?(r(),m("span",st," Details required. ")):V("",!0)]),t("div",at,[e[18]||(e[18]=t("label",{class:"form-label"},[o("Link "),t("span",{class:"required-mask"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>s.form.link=a),type:"text",class:C(["form-control",{"is-invalid":s.v$.link.$dirty&&s.v$.link.$error}])},null,2),[[v,s.form.link]]),s.v$.link.$dirty&&s.v$.link.$error?(r(),m("div",lt," Valid link required. ")):V("",!0)]),t("div",ot,[e[19]||(e[19]=t("label",{class:"form-label"},[o("Year "),t("span",{class:"required-mask"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>s.form.year=a),type:"text",class:C(["form-control",{"is-invalid":s.v$.year.$dirty&&s.v$.year.$error}])},null,2),[[v,s.form.year]]),s.v$.year.$dirty&&s.v$.year.$error?(r(),m("div",it,"Year required.")):V("",!0)]),e[20]||(e[20]=t("div",{class:"col-md-2"},[t("button",{type:"submit",class:"btn btn-primary"},"Submit")],-1))],32),t("div",dt,[t("table",nt,[e[25]||(e[25]=t("thead",null,[t("tr",null,[t("th",{class:"table-th-width-40"},"Details"),t("th",{class:"table-th-width-35"},"Link"),t("th",{class:"table-th-width-10"},"Year"),t("th",{class:"table-th-width-15"},"Actions")])],-1)),s.publications&&s.publications.length>0?(r(),L(x,{key:0,modelValue:s.publications,"onUpdate:modelValue":e[4]||(e[4]=a=>s.publications=a),tag:"tbody","item-key":"id",onEnd:s.onSortEnd},{item:n(({element:a})=>[t("tr",null,[t("td",null,[a.details.length<=15?(r(),m("span",rt,k(a.details),1)):(r(),m("span",ct,[o(k(a.details.slice(0,35))+"... ",1),t("a",{href:"#",onClick:g(c=>s.showDetails(a),["prevent"])},e[21]||(e[21]=[t("span",{class:"text-primary"},"View",-1)]),8,mt)]))]),t("td",null,[t("a",{href:a.link,target:"_blank"},k(a.link.slice(0,35))+"...",9,bt)]),t("td",null,k(a.year),1),t("td",null,[t("a",{href:"#",onClick:g(c=>s.editPublication(a),["prevent"]),class:"text-primary"},e[22]||(e[22]=[t("i",{class:"bi bi-pencil"},null,-1),o(" Edit ")]),8,ut),t("a",{href:"#",onClick:g(c=>s.confirmDelete(a),["prevent"]),class:"text-danger"},e[23]||(e[23]=[t("i",{class:"bi bi-trash"},null,-1),o(" Delete ")]),8,vt)])])]),_:1},8,["modelValue","onEnd"])):(r(),m("tbody",yt,e[24]||(e[24]=[t("tr",null,[t("td",{colspan:"4",class:"maroon"},"No records")],-1)])))]),t("div",ft,[t("div",pt,[t("div",gt,[e[26]||(e[26]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"viewDetailsModalLabel"},"Publication Details"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",kt,k(s.selectedDetails),1)])])])]),t("div",wt,[t("div",ht,[t("div",_t,[t("form",{onSubmit:e[8]||(e[8]=g((...a)=>s.updatePublication&&s.updatePublication(...a),["prevent"]))},[e[30]||(e[30]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"editModalLabel"},"Edit Publication"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",xt,[t("div",Dt,[e[27]||(e[27]=t("label",{class:"form-label"},"Details",-1)),u(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=a=>s.editForm.details=a),class:"form-control",rows:"3"},null,512),[[v,s.editForm.details]])]),t("div",Mt,[e[28]||(e[28]=t("label",{class:"form-label"},"Link",-1)),u(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>s.editForm.link=a),type:"url",class:"form-control"},null,512),[[v,s.editForm.link]])]),t("div",Vt,[e[29]||(e[29]=t("label",{class:"form-label"},"Year",-1)),u(t("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>s.editForm.year=a),type:"number",class:"form-control"},null,512),[[v,s.editForm.year]])])]),e[31]||(e[31]=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel "),t("button",{type:"submit",class:"btn btn-primary"},"Update")],-1))],32)])])]),t("div",Ct,[t("div",Et,[t("div",Bt,[t("div",Pt,[t("div",St,[e[32]||(e[32]=B('<div class="col-md-12 text-center circle"><i class="bi bi-exclamation-triangle-fill text-danger" style="border-radius:50%;padding:4px;background-color:#facdcd;"></i></div><div class="col-md-12 text-center mt-3"><h5 class="font-weight-bold">Are you sure?</h5></div><div class="col-md-12 text-center text-muted"><p> This action cannot be undone. All values associated this field will be lost </p></div>',3)),t("div",Ft,[t("button",{type:"button",class:"btn btn-danger w-100",onClick:e[9]||(e[9]=(...a)=>s.performDelete&&s.performDelete(...a))}," Delete Field ")]),e[33]||(e[33]=t("div",{class:"col-md-12 text-center mt-2"},[t("button",{type:"button",class:"btn btn-secondary w-100","data-bs-dismiss":"modal"}," Cancel ")],-1))])])])])])])])])])])],64)}const jt=F(O,[["render",It]]);export{jt as default};
