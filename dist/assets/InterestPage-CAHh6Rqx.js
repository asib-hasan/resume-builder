import{S}from"./SideBar-CoVQvkwt.js";import{_ as D,r as A,u as V}from"./index-BYVp4fHy.js";import{c as g,a as d,b as e,r as w,d as F,p as i,w as h,e as _,f as B,g as r,v as C,t as E,s as z,y as M,F as N,n as T,i as v,x as U,l as O,o as f}from"./index-CIbV6caW.js";import{a as p}from"./index-D8rVyQy1.js";import{d as q}from"./vuedraggable.umd-A9et21qD.js";const L={components:{SideBar:S,draggable:q},setup(){const l=localStorage.getItem("token"),t=T.useToast(),m=v({area:""}),s=v({area:""}),u=v(null),y=v([]),c=v({id:null,area:""}),n=U(()=>({area:{required:A}})),b=V(n,m),a=async()=>{try{const o=await p.get("http://127.0.0.1:8000/api/interests",{headers:{Authorization:`Bearer ${l}`}});y.value=Array.isArray(o.data.data)?o.data.data:[o.data.data]}catch{t.error("Error loading interests.")}};return O(a),{form:m,v$:b,submitForm:async()=>{if(await b.value.$validate())try{(await p.post("http://127.0.0.1:8000/api/interests",m.value,{headers:{Authorization:`Bearer ${l}`}})).status===201&&(t.success("Interest added!"),a(),m.value={area:""},b.value.$reset())}catch{t.error("Error adding interest.")}},interests:y,editForm:s,editingId:u,editInterest:o=>{s.value={area:o.area},u.value=o.id,window.bootstrap.Modal.getOrCreateInstance(document.getElementById("editModal")).show()},updateInterest:async()=>{if(u.value)try{(await p.put(`http://127.0.0.1:8000/api/interests/${u.value}`,s.value,{headers:{Authorization:`Bearer ${l}`}})).status===200&&(t.success("Interest updated!"),a(),window.bootstrap.Modal.getInstance(document.getElementById("editModal")).hide())}catch{t.error("Update failed.")}},confirmDelete:o=>{c.value={id:o.id,area:o.area},window.bootstrap.Modal.getOrCreateInstance(document.getElementById("deleteModal")).show()},performDelete:async()=>{try{await p.delete(`http://127.0.0.1:8000/api/interests/${c.value.id}`,{headers:{Authorization:`Bearer ${l}`}}),t.success("Interest deleted!"),a()}catch{t.error("Delete failed.")}finally{window.bootstrap.Modal.getInstance(document.getElementById("deleteModal")).hide()}},deleteTarget:c,onSortEnd:async()=>{try{const o=y.value.map((I,x)=>({...I,sort_order:x+1}));await p.post("http://127.0.0.1:8000/api/update/interest/order",{interests:o},{headers:{Authorization:`Bearer ${l}`}}),t.success("Order updated!")}catch{t.error("Sort order update failed.")}}}}},P={id:"main",class:"main"},$={class:"dashboard"},H={class:"row"},K={class:"col-md-12"},R={class:"nav nav-tabs nav-tabs-bordered d-flex"},j={class:"nav-item tab-style"},G={class:"nav-item tab-style"},J={class:"nav-item tab-style"},Q={class:"nav-item tab-style"},W={class:"nav-item"},X={class:"nav-item tab-style"},Y={class:"tab-content"},Z={class:"col-md-6"},tt={key:0,class:"error-msg"},et={class:"col-md-12 mt-4"},st={class:"table table-bordered table-sm"},at=["onClick"],ot=["onClick"],rt={key:1},lt={class:"modal fade",id:"editModal",tabindex:"-1","aria-labelledby":"editModalLabel","aria-hidden":"true"},nt={class:"modal-dialog"},dt={class:"modal-content"},it={class:"modal-body row g-3"},mt={class:"col-md-12"},ut={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"confirmDeleteLabel","aria-hidden":"true"},ct={class:"modal-dialog"},bt={class:"modal-content"},vt={class:"modal-body"},ft={class:"modal-footer"};function pt(l,t,m,s,u,y){const c=w("SideBar"),n=w("router-link"),b=w("draggable");return f(),g(N,null,[d(c),e("main",P,[t[27]||(t[27]=F('<div class="pagetitle"><ol class="breadcrumb"><li class="breadcrumb-item active">Home</li><li class="breadcrumb-item"><a href="">My Resume</a></li></ol></div>',1)),e("section",$,[e("div",H,[e("div",K,[e("ul",R,[e("li",j,[d(n,{to:"/resume/profile",class:"nav-link font-weight-bold"},{default:i(()=>t[7]||(t[7]=[r("Personal")])),_:1})]),e("li",G,[d(n,{to:"/resume/experiences",class:"nav-link font-weight-bold"},{default:i(()=>t[8]||(t[8]=[r("Experience")])),_:1})]),e("li",J,[d(n,{to:"/resume/educations",class:"nav-link font-weight-bold"},{default:i(()=>t[9]||(t[9]=[r("Education")])),_:1})]),e("li",Q,[d(n,{to:"/resume/skills",class:"nav-link font-weight-bold"},{default:i(()=>t[10]||(t[10]=[r("Skills")])),_:1})]),e("li",W,[d(n,{to:"/resume/interests",class:"nav-link active font-weight-bold"},{default:i(()=>t[11]||(t[11]=[r("Interest")])),_:1})]),e("li",X,[d(n,{to:"/resume/publications",class:"nav-link font-weight-bold"},{default:i(()=>t[12]||(t[12]=[r("Publications")])),_:1})])]),e("div",Y,[e("form",{onSubmit:t[1]||(t[1]=h((...a)=>s.submitForm&&s.submitForm(...a),["prevent"])),class:"row g-3"},[e("div",Z,[t[13]||(t[13]=e("label",{class:"form-label"},[r("Area "),e("span",{class:"required-mask"},"*")],-1)),_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>s.form.area=a),type:"text",class:E(["form-control",{"is-invalid":s.v$.area.$dirty&&s.v$.area.$error}])},null,2),[[C,s.form.area]]),s.v$.area.$dirty&&s.v$.area.$error?(f(),g("span",tt,"Area required.")):B("",!0)]),t[14]||(t[14]=e("div",{class:"col-md-2"},[e("label",{class:"form-label"},"Â "),e("button",{type:"submit",class:"btn btn-primary"},"Submit")],-1))],32),e("div",et,[e("table",st,[e("thead",null,[e("tr",null,[e("th",{onClick:t[2]||(t[2]=a=>l.sortBy("area")),style:{cursor:"pointer"}},[t[15]||(t[15]=r(" Area ")),l.sortKey==="area"?(f(),g("i",{key:0,class:E(l.sortOrder==="asc"?"bi bi-arrow-up":"bi bi-arrow-down")},null,2)):B("",!0)]),t[16]||(t[16]=e("th",null,"Actions",-1))])]),s.interests&&s.interests.length>0?(f(),z(b,{key:0,modelValue:s.interests,"onUpdate:modelValue":t[3]||(t[3]=a=>s.interests=a),tag:"tbody","item-key":"id",onEnd:s.onSortEnd},{item:i(({element:a})=>[e("tr",null,[e("td",null,M(a.area),1),e("td",null,[e("a",{href:"#",onClick:k=>s.editInterest(a),class:"text-primary"},t[17]||(t[17]=[e("i",{class:"bi bi-pencil"},null,-1),r(" Edit ")]),8,at),e("a",{href:"#",onClick:k=>s.confirmDelete(a),class:"text-danger"},t[18]||(t[18]=[e("i",{class:"bi bi-trash"},null,-1),r(" Delete ")]),8,ot)])])]),_:1},8,["modelValue","onEnd"])):(f(),g("tbody",rt,t[19]||(t[19]=[e("tr",null,[e("td",{colspan:"3",class:"maroon"},"No records")],-1)])))])]),e("div",lt,[e("div",nt,[e("div",dt,[e("form",{onSubmit:t[5]||(t[5]=h((...a)=>s.updateInterest&&s.updateInterest(...a),["prevent"]))},[t[21]||(t[21]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"editModalLabel"},"Edit Interest"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",it,[e("div",mt,[t[20]||(t[20]=e("label",{class:"form-label"},"Area",-1)),_(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>s.editForm.area=a),type:"text",class:"form-control"},null,512),[[C,s.editForm.area]])])]),t[22]||(t[22]=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel "),e("button",{type:"submit",class:"btn btn-primary"},"Update")],-1))],32)])])]),e("div",ut,[e("div",ct,[e("div",bt,[t[26]||(t[26]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"deleteModal"},"Confirm Delete"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",vt,[t[23]||(t[23]=r(' Are you sure you want to delete "')),e("strong",null,M(s.deleteTarget.area),1),t[24]||(t[24]=r('"? '))]),e("div",ft,[t[25]||(t[25]=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel ",-1)),e("button",{type:"button",class:"btn btn-danger",onClick:t[6]||(t[6]=(...a)=>s.performDelete&&s.performDelete(...a))}," Delete ")])])])])])])])])])],64)}const Mt=D(L,[["render",pt]]);export{Mt as default};
