import{S as z}from"./SideBar-COT6sxyv.js";import{r as y,u as h}from"./index-C3a4g50J.js";import{c as u,a as m,b as e,r as M,d as U,w as c,k as V,l as i,f,e as d,v as r,n as v,A as N,F as T,j as O,h as g,o as P,B as R,i as n,t as p}from"./index-mpPEvR65.js";import{a as _}from"./index-D8rVyQy1.js";import{d as H}from"./vuedraggable.umd-DRImxRg-.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={components:{SideBar:z,draggable:H},setup(){const b=localStorage.getItem("token"),t=O.useToast(),w=g({institute:"",city:"",degree:"",field_of_study:"",start_date:"",end_date:"",result:""}),o=g(null),D=g({institute:"",city:"",degree:"",field_of_study:"",start_date:"",end_date:"",result:""}),E=g([]),k=g(""),a=g("asc"),S=g({id:null}),s=async()=>{try{const l=await _.get("http://127.0.0.1:8000/api/educations",{headers:{Authorization:`Bearer ${b}`}});l.status===200&&(E.value=Array.isArray(l.data.data)?l.data.data:[l.data.data])}catch{t.error("Error loading education records.")}};P(()=>{document.getElementById("my-resume").classList.add("nav-active"),s()});const B=R(()=>({institute:{required:y},city:{required:y},degree:{required:y},field_of_study:{required:y},start_date:{required:y},end_date:{required:y},result:{required:y}})),C=h(B,w),q=async()=>{if(!await C.value.$validate()){t.error("Please fill all fields.");return}try{(await _.post("http://127.0.0.1:8000/api/educations",w.value,{headers:{Authorization:`Bearer ${b}`}})).status===201&&(t.success("Education information added!"),s(),L())}catch(x){console.error(x),t.error("Failed to save education.")}},L=()=>{w.value={institute:"",city:"",degree:"",field_of_study:"",start_date:"",end_date:"",result:""},C.value.$reset()};return{form:w,v$:C,submitForm:q,educations:E,deleteEducation:async l=>{if(confirm("Are you sure?"))try{await _.delete(`http://127.0.0.1:8000/api/educations/${l}`,{headers:{Authorization:`Bearer ${b}`}}),t.success("Education information deleted."),s()}catch{t.error("Error deleting education.")}},editEducation:l=>{D.value={...l},o.value=l.id,window.bootstrap.Modal.getOrCreateInstance(document.getElementById("editEducationModal")).show()},editForm:D,editingIndex:o,updateEducation:async()=>{if(o.value!==null)try{(await _.put(`http://127.0.0.1:8000/api/educations/${o.value}`,D.value,{headers:{Authorization:`Bearer ${b}`}})).status===200&&(t.success("Education information updated!"),s(),window.bootstrap.Modal.getInstance(document.getElementById("editEducationModal")).hide())}catch{t.error("Error updating education.")}},sortKey:k,sortOrder:a,sortBy:l=>{k.value===l?a.value=a.value==="asc"?"desc":"asc":(k.value=l,a.value="asc"),E.value.sort((x,I)=>{let F=(x[l]||"").toString().toLowerCase(),A=(I[l]||"").toString().toLowerCase();return F<A?a.value==="asc"?-1:1:F>A?a.value==="asc"?1:-1:0})},onSortEnd:async()=>{try{const l=E.value.map((I,F)=>({...I,sort_order:F+1}));(await _.post("http://127.0.0.1:8000/api/update/education/order",{educations:l},{headers:{Authorization:`Bearer ${b}`}})).status===200&&t.success("Sort order updated!")}catch{t.error("Sort update failed.")}},performDelete:async()=>{try{await _.delete(`http://127.0.0.1:8000/api/educations/${S.value.id}`,{headers:{Authorization:`Bearer ${b}`}}),t.success("Education deleted!"),s()}catch{t.error("Delete failed.")}finally{window.bootstrap.Modal.getInstance(document.getElementById("deleteModal")).hide()}},confirmDelete:l=>{S.value={id:l.id},window.bootstrap.Modal.getOrCreateInstance(document.getElementById("deleteModal")).show()}}}},G={id:"main",class:"main"},J={class:"dashboard"},Q={class:"row"},W={class:"col-md-12"},X={class:"nav nav-tabs nav-tabs-bordered d-flex"},Y={class:"nav-item tab-style"},Z={class:"nav-item tab-style"},$={class:"nav-item"},tt={class:"nav-item tab-style"},et={class:"nav-item tab-style"},ot={class:"nav-item tab-style"},st={class:"nav-item tab-style"},lt={class:"nav-item tab-style"},dt={class:"nav-item tab-style"},at={class:"tab-content"},it={class:"col-md-4"},rt={key:0,class:"error-msg"},nt={class:"col-md-4"},ut={key:0,class:"error-msg"},mt={class:"col-md-4"},ct={key:0,class:"error-msg"},ft={class:"col-md-4"},vt={key:0,class:"error-msg"},bt={class:"col-md-4"},yt={key:0,class:"error-msg"},gt={class:"col-md-4"},pt={key:0,class:"error-msg"},_t={class:"col-md-4"},wt={key:0,class:"error-msg"},Et={class:"col-md-12 mt-4"},kt={class:"table table-bordered table-sm"},xt=["onClick"],Dt=["onClick"],St={key:1},Ft={class:"modal fade",id:"editEducationModal",tabindex:"-1","aria-labelledby":"editEducationModalLabel","aria-hidden":"true"},Vt={class:"modal-dialog modal-lg"},Bt={class:"modal-content"},Ct={class:"modal-body row g-3"},It={class:"col-md-4"},Mt={class:"col-md-4"},At={class:"col-md-4"},Ut={class:"col-md-4"},qt={class:"col-md-4"},Lt={class:"col-md-4"},zt={class:"modal fade",id:"deleteModal",tabindex:"-1","aria-labelledby":"confirmDeleteLabel","aria-hidden":"true"},ht={class:"modal-dialog",style:{"max-width":"400px"}},Nt={class:"modal-content"},Tt={class:"modal-body"},Ot={class:"row mt-3"},Pt={class:"col-md-12 text-center"};function Rt(b,t,w,o,D,E){const k=M("SideBar"),a=M("router-link"),S=M("draggable");return n(),u(T,null,[m(k),e("main",G,[t[55]||(t[55]=U('<div class="pagetitle"><ol class="breadcrumb"><li class="breadcrumb-item active">Home</li><li class="breadcrumb-item"><a href="">My Resume</a></li></ol></div>',1)),e("section",J,[e("div",Q,[e("div",W,[e("ul",X,[e("li",Y,[m(a,{to:"/resume/profile",class:"nav-link font-weight-bold"},{default:c(()=>t[18]||(t[18]=[d("Personal")])),_:1})]),e("li",Z,[m(a,{to:"/resume/experiences",class:"nav-link font-weight-bold"},{default:c(()=>t[19]||(t[19]=[d("Experience")])),_:1})]),e("li",$,[m(a,{to:"/resume/educations",class:"nav-link active font-weight-bold"},{default:c(()=>t[20]||(t[20]=[d("Education")])),_:1})]),e("li",tt,[m(a,{to:"/resume/skills",class:"nav-link font-weight-bold"},{default:c(()=>t[21]||(t[21]=[d("Skills")])),_:1})]),e("li",et,[m(a,{to:"/resume/interests",class:"nav-link font-weight-bold"},{default:c(()=>t[22]||(t[22]=[d("Interest")])),_:1})]),e("li",ot,[m(a,{to:"/resume/publications",class:"nav-link font-weight-bold"},{default:c(()=>t[23]||(t[23]=[d("Publications")])),_:1})]),e("li",st,[m(a,{to:"/resume/languages",class:"nav-link font-weight-bold"},{default:c(()=>t[24]||(t[24]=[d("Language")])),_:1})]),e("li",lt,[m(a,{to:"/resume/certifications",class:"nav-link font-weight-bold"},{default:c(()=>t[25]||(t[25]=[d("Certifications")])),_:1})]),e("li",dt,[m(a,{to:"/resume/awards",class:"nav-link font-weight-bold"},{default:c(()=>t[26]||(t[26]=[d("Awards & Honors")])),_:1})])]),e("div",at,[e("form",{onSubmit:t[7]||(t[7]=V((...s)=>o.submitForm&&o.submitForm(...s),["prevent"])),class:"row g-3"},[e("div",it,[t[27]||(t[27]=e("label",{class:"form-label"},[d("Institute "),e("span",{class:"required-mask"},"*")],-1)),i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.form.institute=s),type:"text",class:v(["form-control",{"is-invalid":o.v$.institute.$dirty&&o.v$.institute.$error}])},null,2),[[r,o.form.institute]]),o.v$.institute.$error?(n(),u("div",rt,"Institute required")):f("",!0)]),e("div",nt,[t[28]||(t[28]=e("label",{class:"form-label"},[d("City "),e("span",{class:"required-mask"},"*")],-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.form.city=s),type:"text",class:v(["form-control",{"is-invalid":o.v$.city.$dirty&&o.v$.city.$error}])},null,2),[[r,o.form.city]]),o.v$.city.$error?(n(),u("div",ut,"City required")):f("",!0)]),e("div",mt,[t[29]||(t[29]=e("label",{class:"form-label"},[d("Degree "),e("span",{class:"required-mask"},"*")],-1)),i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.form.degree=s),type:"text",class:v(["form-control",{"is-invalid":o.v$.degree.$dirty&&o.v$.degree.$error}])},null,2),[[r,o.form.degree]]),o.v$.degree.$error?(n(),u("div",ct,"Degree required")):f("",!0)]),e("div",ft,[t[30]||(t[30]=e("label",{class:"form-label"},"Field of Study",-1)),i(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.form.field_of_study=s),type:"text",class:v(["form-control",{"is-invalid":o.v$.field_of_study.$dirty&&o.v$.field_of_study.$error}])},null,2),[[r,o.form.field_of_study]]),o.v$.field_of_study.$error?(n(),u("div",vt,"Field of study required")):f("",!0)]),e("div",bt,[t[31]||(t[31]=e("label",{class:"form-label"},[d("Start Date "),e("span",{class:"required-mask"},"*")],-1)),i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.form.start_date=s),type:"date",class:v(["form-control",{"is-invalid":o.v$.start_date.$dirty&&o.v$.start_date.$error}])},null,2),[[r,o.form.start_date]]),o.v$.start_date.$error?(n(),u("div",yt,"Start date required")):f("",!0)]),e("div",gt,[t[32]||(t[32]=e("label",{class:"form-label"},[d("End Date "),e("span",{class:"required-mask"},"*")],-1)),i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.form.end_date=s),type:"date",class:v(["form-control",{"is-invalid":o.v$.end_date.$dirty&&o.v$.end_date.$error}])},null,2),[[r,o.form.end_date]]),o.v$.end_date.$error?(n(),u("div",pt,"End date required")):f("",!0)]),e("div",_t,[t[33]||(t[33]=e("label",{class:"form-label"},[d("Result "),e("span",{class:"required-mask"},"*")],-1)),i(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.form.result=s),type:"text",class:v(["form-control",{"is-invalid":o.v$.result.$dirty&&o.v$.result.$error}])},null,2),[[r,o.form.result]]),o.v$.result.$error?(n(),u("div",wt,"Result required")):f("",!0)]),t[34]||(t[34]=e("div",{class:"col-md-2"},[e("label",{class:"form-label"},"Â "),e("button",{type:"submit",class:"btn btn-primary"},"Submit")],-1))],32),e("div",Et,[e("table",kt,[e("thead",null,[e("tr",null,[e("th",{onClick:t[8]||(t[8]=s=>o.sortBy("institute")),style:{cursor:"pointer"}},[t[35]||(t[35]=d(" Institute ")),o.sortKey==="institute"?(n(),u("i",{key:0,class:v(o.sortOrder==="asc"?"bi bi-arrow-up":"bi bi-arrow-down")},null,2)):f("",!0)]),t[36]||(t[36]=e("th",null,"City",-1)),t[37]||(t[37]=e("th",null,"Degree",-1)),t[38]||(t[38]=e("th",null,"Field",-1)),t[39]||(t[39]=e("th",null,"Start Date",-1)),t[40]||(t[40]=e("th",null,"End Date",-1)),t[41]||(t[41]=e("th",null,"Actions",-1))])]),o.educations&&o.educations.length>0?(n(),N(S,{key:0,modelValue:o.educations,"onUpdate:modelValue":t[9]||(t[9]=s=>o.educations=s),tag:"tbody","item-key":"id",onEnd:o.onSortEnd},{item:c(({element:s})=>[e("tr",null,[e("td",null,p(s.institute),1),e("td",null,p(s.city),1),e("td",null,p(s.degree),1),e("td",null,p(s.field_of_study),1),e("td",null,p(new Date(s.start_date).toLocaleDateString()),1),e("td",null,p(new Date(s.end_date).toLocaleDateString()),1),e("td",null,[e("a",{href:"#",onClick:V(B=>o.editEducation(s),["prevent"]),class:"text-primary"},t[42]||(t[42]=[e("i",{class:"bi bi-pencil"},null,-1),d(" Edit ")]),8,xt),e("a",{href:"#",onClick:V(B=>o.confirmDelete(s),["prevent"]),class:"text-danger"},t[43]||(t[43]=[e("i",{class:"bi bi-trash"},null,-1),d(" Delete ")]),8,Dt)])])]),_:1},8,["modelValue","onEnd"])):(n(),u("tbody",St,t[44]||(t[44]=[e("tr",null,[e("td",{colspan:"7"},"Loading...")],-1)])))])]),e("div",Ft,[e("div",Vt,[e("div",Bt,[e("form",{onSubmit:t[16]||(t[16]=V((...s)=>o.updateEducation&&o.updateEducation(...s),["prevent"]))},[t[51]||(t[51]=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"editEducationModalLabel"},"Edit Education"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",Ct,[e("div",It,[t[45]||(t[45]=e("label",{class:"form-label"},"Institute",-1)),i(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>o.editForm.institute=s),type:"text",class:"form-control"},null,512),[[r,o.editForm.institute]])]),e("div",Mt,[t[46]||(t[46]=e("label",{class:"form-label"},"City",-1)),i(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>o.editForm.city=s),type:"text",class:"form-control"},null,512),[[r,o.editForm.city]])]),e("div",At,[t[47]||(t[47]=e("label",{class:"form-label"},"Degree",-1)),i(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>o.editForm.degree=s),type:"text",class:"form-control"},null,512),[[r,o.editForm.degree]])]),e("div",Ut,[t[48]||(t[48]=e("label",{class:"form-label"},"Field of Study",-1)),i(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>o.editForm.field_of_study=s),type:"text",class:"form-control"},null,512),[[r,o.editForm.field_of_study]])]),e("div",qt,[t[49]||(t[49]=e("label",{class:"form-label"},"Start Date",-1)),i(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>o.editForm.start_date=s),type:"date",class:"form-control"},null,512),[[r,o.editForm.start_date]])]),e("div",Lt,[t[50]||(t[50]=e("label",{class:"form-label"},"End Date",-1)),i(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>o.editForm.end_date=s),type:"date",class:"form-control"},null,512),[[r,o.editForm.end_date]])])]),t[52]||(t[52]=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Cancel "),e("button",{type:"submit",class:"btn btn-primary"},"Update")],-1))],32)])])]),e("div",zt,[e("div",ht,[e("div",Nt,[e("div",Tt,[e("div",Ot,[t[53]||(t[53]=U('<div class="col-md-12 text-center circle"><i class="bi bi-exclamation-triangle-fill text-danger" style="border-radius:50%;padding:4px;background-color:#facdcd;"></i></div><div class="col-md-12 text-center mt-3"><h5 class="font-weight-bold">Are you sure?</h5></div><div class="col-md-12 text-center text-muted"><p> This action cannot be undone. All values associated this field will be lost </p></div>',3)),e("div",Pt,[e("button",{type:"button",class:"btn btn-danger w-100",onClick:t[17]||(t[17]=(...s)=>o.performDelete&&o.performDelete(...s))}," Delete Field ")]),t[54]||(t[54]=e("div",{class:"col-md-12 text-center mt-2"},[e("button",{type:"button",class:"btn btn-secondary w-100","data-bs-dismiss":"modal"}," Cancel ")],-1))])])])])])])])])])])],64)}const oe=K(j,[["render",Rt]]);export{oe as default};
